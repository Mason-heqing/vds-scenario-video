webpackJsonp([5],{"4eOt":function(t,e,a){"use strict";function i(t){a("SFVM")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("TtmE"),s=a("C8pC"),n=a("D7x1"),o=a("lbHh"),l=a.n(o),c={name:"order",data:function(){var t=this;return{currentPage:1,total:0,timers:[],currentMonth:[],yearStartTime:"",yearEndTime:"",orderList:[],durationTotalPrice:0,specialTotalPrice:0,totalPrice:0,timesList:[],dataForm:{operateType:1,orgId:l.a.get("orgId"),startDate:"",endDate:"",webmaster:"false"!=l.a.get("isMaster")},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},monthPickerOptions:{shortcuts:[{text:"本月",onClick:function(t){t.$emit("pick",[new Date,new Date])}},{text:"今年至今",onClick:function(t){var e=new Date,a=new Date((new Date).getFullYear(),0);t.$emit("pick",[a,e])}},{text:"最近六个月",onClick:function(t){var e=new Date,a=new Date;a.setMonth(a.getMonth()-6),t.$emit("pick",[a,e])}}]},pickerStartYear:{disabledDate:function(e){if(t.yearEndTime)return e.getFullYear()>t.yearEndTime}},pickerEndYear:{disabledDate:function(e){return e.getFullYear()<t.yearStartTime}},tableLabel:[{label:"机构",param:"orgName",align:"left",sortable:!0,isshow:!0},{label:"时间",param:"dateStr",align:"left",sortable:!0,isshow:!0},{label:"专线包",param:"specialTotalPrice",align:"left",sortable:!0,isshow:!0},{label:"合计",param:"totalPrice",align:"left",sortable:!0,isshow:!0}],tableOption:[],tableSelect:[],leftData:[],listData:[],isShowSelect:!1,loading:!1}},watch:{},filters:{},created:function(){this.getTimeFn()},components:{MsgBox:r.a,FromDialog:s.a,TableCmp:n.a},computed:{},mounted:function(){var t=this;this.getListData(),window.addEventListener("resize",function(){t.parkingRevenue&&t.parkingRevenue.resize()})},methods:{getTimeFn:function(){var t=new Date,e=new Date,a=t.getFullYear(),i=t.getMonth()+1,r=new Date(a,i,0).getDate(),s=this.getFullDate(e.setDate(r)),n=this.getFullDate(e.setDate(1));this.timers=[n,s],this.dataForm.startDate=n.replace(/-/g,""),this.dataForm.endDate=s.replace(/-/g,"")},getFullDate:function(t){var e,a,i,r;return t?(e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate()):(a=fullYear,i=month,r=date),i=i>9?i:"0"+i,r=r>9?r:"0"+r,a+"-"+i+"-"+r},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),e+"-"+a},changeTime:function(t){console.log(t),null!==this.timers&&this.timers.length>0?(this.dataForm.startDate=this.timers[0].replace(/-/g,""),this.dataForm.endDate=this.timers[1].replace(/-/g,""),this.getListData()):(this.dataForm.startDate="",this.dataForm.endDate="",this.timers=[])},changeMonth:function(t){console.log(t),null!==t&&t.length>0?(this.dataForm.startDate=t[0].replace(/-/g,""),this.dataForm.endDate=t[1].replace(/-/g,""),this.getListData()):(this.dataForm.startDate="",this.dataForm.endDate="",this.currentMonth=[])},startYearChange:function(t){this.dataForm.startDate=t,this.getListData()},endYearChange:function(t){this.dataForm.endDate=t,this.getListData()},dateChange:function(){var t=this;1===this.dataForm.operateType?this.$nextTick(function(){t.getTimeFn()}):2===this.dataForm.operateType?(this.currentMonth=[this.formatDate(new Date),this.formatDate(new Date)],this.dataForm.startDate=this.currentMonth[0].replace(/-/g,""),this.dataForm.endDate=this.currentMonth[1].replace(/-/g,"")):(this.yearStartTime=(new Date).getFullYear().toString(),this.yearEndTime=(new Date).getFullYear().toString(),this.dataForm.startDate=(new Date).getFullYear().toString(),this.dataForm.endDate=(new Date).getFullYear().toString()),this.getListData()},getListData:function(){var t=this;this.loading=!0,this.utils.http({url:"/stat/order/search",method:"post",data:this.dataForm},function(e){t.loading=!1,200==e.code&&e.data&&0<e.data.orgDtoList.length&&(e.data.tabOrgInfoList.push({orgName:"合计",dateStr:"",durationTotalPrice:e.data.durationTotalPrice,specialTotalPrice:e.data.specialTotalPrice,totalPrice:e.data.totalPrice}),t.timesList=e.data.dateStrList,t.orderList=e.data.orgDtoList,t.durationTotalPrice=e.data.durationTotalPrice,t.totalPrice=e.data.totalPrice,t.listData=e.data.tabOrgInfoList,t.parkingRevenues())})},resetBtn:function(){this.dataForm={appId:this.$store.state.project.projectId,chargeType:0,currentPage:1,pageSize:10},this.timers=[],this.getTimeFn(),this.getListData()},parkingRevenues:function(){this.parkingRevenue=this.$echarts.init(document.getElementById("parkingRevenue"));var t=[];this.orderList.forEach(function(e,a){var i={focus:"series"},r={};r.name=e.orgName,r.type="bar",r.barWidth=30,r.stack=e.typeStr,r.emphasis=i,r.data=e.priceList,t.push(r)});var e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:t.length>10?[]:this.legend},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.timesList}],yAxis:[{type:"value"}],series:t};this.parkingRevenue.setOption(e)}}},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid tree-color"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"panel-body",staticStyle:{padding:"0px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"box box-primary mb-10"},[a("div",{staticClass:"box-body"},[a("div",{staticClass:"row ml-0"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-lg-2 pl-0",staticStyle:{width:"12%"}},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-12"},[a("el-radio-group",{attrs:{size:"medium"},on:{change:t.dateChange},model:{value:t.dataForm.operateType,callback:function(e){t.$set(t.dataForm,"operateType",e)},expression:"dataForm.operateType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("月")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("年")])],1)],1)])]),t._v(" "),a("div",{staticClass:"col-lg-3 pl-0"},[a("div",{staticClass:"form-group"},[1===t.dataForm.operateType?a("div",{staticClass:"col-md-12"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",clearable:!1,"value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.changeTime},model:{value:t.timers,callback:function(e){t.timers=e},expression:"timers"}})],1):2===t.dataForm.operateType?a("div",{staticClass:"col-md-12"},[a("el-date-picker",{attrs:{type:"monthrange",clearable:!1,"value-format":"yyyy-MM",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","picker-options":t.monthPickerOptions},on:{change:t.changeMonth},model:{value:t.currentMonth,callback:function(e){t.currentMonth=e},expression:"currentMonth"}})],1):a("div",{staticClass:"col-md-12"},[a("el-date-picker",{staticStyle:{width:"47%"},attrs:{format:"yyyy","value-format":"yyyy",type:"year",placeholder:"开始年份",clearable:!1,"picker-options":t.pickerStartYear},on:{change:t.startYearChange},model:{value:t.yearStartTime,callback:function(e){t.yearStartTime=e},expression:"yearStartTime"}}),t._v("\n                          至\n                          "),a("el-date-picker",{staticStyle:{width:"47%"},attrs:{format:"yyyy","value-format":"yyyy",type:"year",placeholder:"结束年份",clearable:!1,"picker-options":t.pickerEndYear},on:{change:t.endYearChange},model:{value:t.yearEndTime,callback:function(e){t.yearEndTime=e},expression:"yearEndTime"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2 pr-0"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getListData}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                    ")])])])])])])])])]),t._v(" "),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"box-body"},[t._m(1),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.listData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}})],1)])])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      订单统计\n      ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 订单统计\n      ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-30"},[a("div",{staticClass:"col-sm-12"},[a("h4",{staticClass:"pl-15"},[t._v("订单金额统计")])]),t._v(" "),a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"chart",staticStyle:{height:"340px","padding-right":"10px"},attrs:{id:"parkingRevenue"}})])])}],h={render:d,staticRenderFns:p},m=h,g=a("VU/8"),u=i,v=g(c,m,!1,u,"data-v-1f366920",null);e.default=v.exports},SFVM:function(t,e,a){var i=a("d9Yo");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("ed46c0c4",i,!0)},d9Yo:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.btn-group-box[data-v-1f366920]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.btn-group-box>div[data-v-1f366920]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.channel-pay[data-v-1f366920] .el-select{width:100%\n}\n.Summary[data-v-1f366920]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:30px 0\n}\n.el-table[data-v-1f366920]{max-height:200px;overflow-y:scroll\n}\n.custom-style[data-v-1f366920]{color:#0099FF;font-size:22px\n}\n.el-table[data-v-1f366920]::before{height:0\n}\n",""])}});