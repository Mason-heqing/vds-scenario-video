webpackJsonp([4],{OPNl:function(t,e,a){var i=a("eu1/");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("4ed8e32a",i,!0)},axPR:function(t,e,a){"use strict";function i(t){a("OPNl")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("TtmE"),o=a("D7x1"),n=a("7lXo"),l=a("5Wmi"),r=a("pOg+"),c=a("18Ef"),d=a("lbHh"),p=a.n(d),u={name:"home",data:function(){return{msg:"视频资源-时长包",currentPage:1,currentPage1:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",payDialogVisible:!1,payImg:"",orderName:"",orderAmount:0,payNum:null,socketUrl:"",userId:null,total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"时长(小时)",param:"duration",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"购买时间",param:"purchaseTime",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"绑定设备S/N",param:"bindTarget",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"激活时间",param:"activationTimeFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{label:"过期时间",param:"expireTimeFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{label:"剩余时长",param:"remainingSecondsFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{label:"来源",param:"sourceFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{label:"是否转让",param:"transfered",align:"center",isshow:!0,sortable:!0,width:"100",render:function(t){return 1===t.transfered?"已转让":"未转让"}},{label:"绑定状态",param:"bindedFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],activeName:"first",isShowSelect:!0,personType:[{value:"1",label:"户主"},{value:"2",label:"家庭成员"},{value:"3",label:"租客"},{value:"5",label:"其他"}],total1:1,tableOption1:[],tableSelect1:[],loading:!1,cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",checkStrictly:!0,expandTrigger:"hover"},popIndex:1,checkPopVisible:!1,checkPopTitle:"审核",checkForm:{bindStatus:"",id:"",bindFailReseaon:""},checkMsg:"",showCheckTip:!1,outPop:!1,outChecked:!1,previewImg:[],showViewer:!1,imgurl:"",tabIndex:0,importPop:!1,fileList:[],uploadData:{appId:""},authPopVisible:!1,authPopTitle:"",authId:"",authName:"",isExport:!1,exportUrl:"",exportErrList:[],exporterrPop:!1,timer:null,elcascaderkey:1,timePacketForm:{currentPage:1,pageSize:10,orgId:p.a.get("orgId"),transferFlag:!1,category:1,source:"",timesLength:"",binded:"",deviceSearch:""},isMaster:!1,sourceType:[{name:"全部",id:null},{name:"随设备赠送",id:0},{name:"购买",id:1},{name:"转让",id:2}],statusList:[{name:"全部",id:null},{name:"已绑定",id:1},{name:"未绑定",id:0}],dialogVisible:!1,activeNamePaytype:"first",tiemsNum:1,timesTotal:0,timesPackageprice:0,usefulLife:null,durationGoodsList:[],timesLength:"",exportVisible:!1,activationCode:"",transferInstitutionVisible:!1,isBtn:!1,mechanismDialogVisible:!1,selectMechanism:"",mechanismList:[],deviceDialogVisible:!1,selectDevice:"",deviceList:[],toolForm:{},toolType:null,props:{label:"name",children:"zones"},count:1}},filters:{},created:function(){this.isMaster="false"!=p.a.get("isMaster"),this.imgurl=this.tools.global.API_URL},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},watch:{},components:{MsgBox:s.a,TableCmp:o.a,TableBmp:n.a,ElImageViewer:l.a,ExportBox:r.a,AuthBox:c.a},mounted:function(){this.getgoods(),this.getPersonList(),this.getWebsocketUrl()},destroyed:function(){this.payImg&&""!=this.payImg&&this.socketApi.websocketclose()},methods:{websocketToLogin:function(){var t={type:"WS_SUBSCRIBE",userId:this.userId};this.socketApi.sendSock(t,this.getConfigResult)},getConfigResult:function(t){console.log("接收回调函数返回数据的方法",t),"WS_SUBSCRIBE"==t.type||"WS_PAY_COMP"==t.type&&(this.payDialogVisible=!1,this.utils.tip("success","支付成功!"),this.socketApi.websocketclose(),this.getTableData())},getWebsocketUrl:function(){var t=this;this.utils.http({url:"/wx/native/getNativeSocketUrl",method:"post"},function(e){200==e.code&&(t.socketUrl=e.data,p.a.set("payWebsocketUrl",e.data.webSocketUtl),t.userId=e.data.userId),console.log("获取socket地址",e)})},radioChangeS:function(t){this.timePacketForm.transferFlag=t,this.getPersonList()},sourceChange:function(){this.getPersonList()},bindChange:function(){this.getPersonList()},paySelect:function(){this.dialogVisible=!0},radioChangeG:function(t){var e=this;this.timespackAgeId=t,this.durationGoodsList.map(function(a){a.id==t&&(e.timesPackageprice=a.price,e.usefulLife=a.updateTime)}),""==this.tiemsNum?this.timesTotal=0:this.timesTotal=parseInt(this.timesPackageprice)*this.tiemsNum},changeNumTimes:function(t){this.timesTotal=parseInt(this.timesPackageprice)*t},onSubmit:function(){var t=this,e={goodsId:"",orderId:"",orgId:p.a.get("orgId"),isWebmaster:this.isMaster,quantity:0};return 0==this.tiemsNum?void this.$message.error("购买数量不能为0,请重新输入购买数量!"):1e4<=this.tiemsNum?void this.$message.error("购买数量不能超过10000个,请重新输入购买数量!"):(e.goodsId=this.timesLength,e.quantity=this.tiemsNum,this.isBtn=!0,void this.utils.http({url:"/order/create",method:"post",data:e},function(e){t.isBtn=!1,200==e.code&&(t.dialogVisible=!1,t.isMaster?t.utils.tip("success","订单支付成功"):(t.payImg=e.data.codeUrlStr,t.orderName=e.data.goodsDesc,t.orderAmount=e.data.totalPrice,t.payNum=e.data.quantity,t.payDialogVisible=!0,t.socketApi.initWebSocket(),t.websocketToLogin()),t.getPersonList())}))},gooperation:function(t,e){1===e?(this.mechanismDialogVisible=!0,this.getmechanism(),this.toolForm={category:1,operateObjectId:"",operateType:2,packageIdList:[t.id],orgId:p.a.get("orgId")}):(this.deviceDialogVisible=!0,this.getDevice(),this.toolForm={category:1,operateObjectId:"",operateType:1,packageIdList:[t.id],orgId:p.a.get("orgId")}),this.toolType=e},getmechanism:function(){var t=this;this.utils.http({url:"/org/search/child?orgId="+p.a.get("orgId"),method:"POST"},function(e){200==e.code&&(t.mechanismList=e.data)})},getDevice:function(){var t=this;this.utils.http({url:"/org/search/child/device?orgId="+p.a.get("orgId"),method:"POST"},function(e){200==e.code&&(t.deviceList=e.data.deviceList)})},checkedMechanism:function(){""==this.selectMechanism?this.$message.error("请选择机构!"):(this.toolForm.operateObjectId=this.selectMechanism,console.log("选择机构:",this.toolForm),this.dataSend(this.toolForm,this.toolType))},checkedDevide:function(){""==this.selectDevice?this.$message.error("请选择设备!"):(this.toolForm.operateObjectId=this.selectDevice,this.dataSend(this.toolForm,this.toolType))},dataSend:function(t,e){var a=this;this.isBtn=!0,this.utils.http({url:"/videoPackage/operate",method:"POST",data:t},function(t){a.isBtn=!1,1==e?(a.mechanismDialogVisible=!1,a.selectMechanism=""):(a.deviceDialogVisible=!1,a.selectDevice=""),200==t.code&&(a.utils.tip("success",1===e?"转让成功":"绑定成功"),a.getPersonList())})},getgoods:function(){var t=this;this.utils.http({url:"/goods/tab",method:"post"},function(e){200==e.code&&(t.durationGoodsList=e.data.durationGoodsList,t.timesLength=e.data.durationGoodsList[0].id,t.timesPackageprice=e.data.durationGoodsList[0].price,t.timesTotal=parseInt(e.data.durationGoodsList[0].price)*parseInt(t.tiemsNum),t.usefulLife=e.data.durationGoodsList[0].updateTime)})},exportModel:function(){this.exportVisible=!0},handleCheckChange:function(t,e,a){console.log(t,e,a)},handleNodeClick:function(t){console.log(t)},loadNode:function(t,e){var a=this;if(0===t.level)return e([{name:"region1"},{name:"region2"}]);if(t.level>3)return e([]);var i;i="region1"===t.data.name||"region2"!==t.data.name&&Math.random()>.5,setTimeout(function(){var t;t=i?[{name:"zone"+a.count++},{name:"zone"+a.count++}]:[],e(t)},500)},elCascaderOnlick:function(){var t=this;setTimeout(function(){document.querySelectorAll(".el-cascader-node__label").forEach(function(e){e.onclick=function(){this.previousElementSibling.click(),t.$refs.elcascader.dropDownVisible=!1}}),document.querySelectorAll(".el-cascader-panel .el-radio").forEach(function(e){e.onclick=function(){t.$refs.elcascader.dropDownVisible=!1}})},100)},assignmentBtn:function(){var t=this.$refs.tableChild.selectData;if(0>=t.length)return void this.$message.error("请先选择时长包 !");var e=[];t.forEach(function(t,a){e.push(t.id)}),this.deviceDialogVisible=!0,this.getmechanism(),this.toolForm={category:1,operateObjectId:"",operateType:2,packageIdList:e,orgId:p.a.get("orgId")},this.toolType=1},allBindBtn:function(){var t=this.$refs.tableChild.selectData;if(0>=t.length)return void this.$message.error("请先选择时长包 !");var e=[];t.forEach(function(t,a){e.push(t.id)}),this.deviceDialogVisible=!0,this.getDevice(),this.toolForm={category:1,operateObjectId:"",operateType:1,packageIdList:e,orgId:p.a.get("orgId")},this.toolType=2},checkboxChange:function(t){for(var e=0;e<this.tableLabel.length;e++)this.tableSelect.indexOf(this.tableLabel[e].label)>-1?this.tableLabel[e].isshow=!0:this.tableLabel[e].isshow=!1},checkboxChange1:function(t){for(var e=0;e<this.tableLabel1.length;e++)this.tableSelect1.indexOf(this.tableLabel1[e].label)>-1?this.tableLabel1[e].isshow=!0:this.tableLabel1[e].isshow=!1},objfilter:function(t){var e={};for(var a in t)""!==t[a]&&null!==t[a]&&(e[a]=t[a]);return e},getPersonList:function(){var t=this;this.loading=!0;var e=this.objfilter(this.timePacketForm);this.utils.http({url:"/videoPackage/search",method:"POST",data:e},function(e){t.loading=!1,200==e.code&&(t.total=e.data.total,t.tableData=e.data.records,t.currentPage=e.data.current)})},getCheckList:function(){var t=this;this.utils.http({url:"/person/queryHouseholderByPage",method:"POST",data:this.PersonListForm1},function(e){200==e.code&&(t.total1=e.data.total,t.tableData1=e.data.records,t.currentPage1=e.data.current)})},cascaderChange:function(t){t&&(this.PersonListForm.groupId=t[t.length-1])},resetBtn:function(){this.timePacketForm={currentPage:1,pageSize:10,orgId:p.a.get("orgId"),transferFlag:!1,category:1,source:"",timesLength:"",binded:"",deviceSearch:""},this.getPersonList()},exportBtn:function(){this.outPop=!0},outBtn:function(){var t=this;if(this.isExport=!0,0==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm.withPic=1:this.PersonListForm.withPic=0;var e=[];this.$refs.tableChild.selectData.forEach(function(t,a){e.push(t.id)}),this.PersonListForm.ids=e,this.utils.http({url:"/person/personExport",method:"POST",data:this.PersonListForm},function(e){t.isExport=!1,t.outPop=!1,delete t.PersonListForm.ids,200==e.code?t.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):t.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}else if(1==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm1.withPic=1:this.PersonListForm1.withPic=0;var a=[],i=this.$refs.tableChild1.selectData;i.forEach(function(t,e){a.push(t.id)}),this.PersonListForm1.ids=a,this.utils.http({url:"/person/houseExport",method:"POST",data:this.PersonListForm1},function(e){t.isExport=!1,t.outPop=!1,delete t.PersonListForm1.ids,200==e.code?t.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):t.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},handleSizeChange:function(t){this.timePacketForm.pageSize=t,this.getPersonList()},handleCurrentChange:function(t){this.timePacketForm.currentPage=t,this.getPersonList()},handleClick:function(t,e){0==t.index?this.tabIndex=0:1==t.index&&(this.tabIndex=1)},submitUpload:function(){this.fileList.length>0?this.$refs.upload.submit():this.$message.error("请选择文件")},selectChange:function(t,e){if(!["zip"].includes(t.name.substring(t.name.lastIndexOf(".")+1)))return this.$message.error("只支持.zip压缩文件"),this.fileList=[],!1;this.fileList=e},beforeAvatarUpload:function(t,e){var a=t.name.substring(t.name.lastIndexOf(".")+1),i=["zip"],s=i.includes(a),o=t.size/1024/1024<128;return s?o?(this.importPop=!1,this.popVisible=!0,this.popTitle="提示",void(this.popContent="人员正在导入请稍后")):(this.$message.error("文件大小不能超过 128MB!"),!1):(this.$message.error("只支持.zip压缩文件"),!1)},successCheck:function(t,e,a){console.log(t),this.$refs.upload.clearFiles(),this.popVisible=!1,200==t.code?1==t.data.isOpen?(this.exportErrList=t.data.list,this.exporterrPop=!0):0==t.data.isOpen?this.$alert("人员导入成功","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):2==t.data.isOpen&&this.$message.error("模板解析异常"):this.$message.error(t.msg)},removeFile:function(){this.fileList=[]},uploadErr:function(t,e,a){this.$message.error("导入失败")},remove:function(t){this.images.splice(t,1)},exceed:function(){this.$message.error("不支持多文件上传")}}},h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-sm-3 pl-0",staticStyle:{width:"26%"}},[a("div",{staticClass:"btn-group"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.isMaster,expression:"isMaster"}],staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.paySelect}},[t._v("\n                                     创建订单\n                                  ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.timePacketForm.transferFlag,expression:"!timePacketForm.transferFlag"}],staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.assignmentBtn}},[a("span",{staticClass:"glyphicon glyphicon-share",attrs:{"aria-hidden":"true"}}),t._v(" 转让\n                                  ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:0===t.timePacketForm.binded,expression:"0 === timePacketForm.binded"}],staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.allBindBtn}},[a("span",{staticClass:"glyphicon glyphicon-resize-small",attrs:{"aria-hidden":"true"}}),t._v(" 批量绑定\n                                  ")])])]),t._v(" "),a("div",{staticClass:"col-sm-9 text-right p-0 flex-style",staticStyle:{width:"74%"}},[a("div",{staticClass:"col-sm-2 pl-0"},[a("el-radio-group",{attrs:{size:"medium"},on:{change:t.radioChangeS},model:{value:t.timePacketForm.transferFlag,callback:function(e){t.$set(t.timePacketForm,"transferFlag",e)},expression:"timePacketForm.transferFlag"}},[a("el-radio-button",{attrs:{label:!1}},[t._v("我的")]),t._v(" "),a("el-radio-button",{attrs:{label:!0}},[t._v("转让")])],1)],1),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"来源"},on:{change:t.sourceChange},model:{value:t.timePacketForm.source,callback:function(e){t.$set(t.timePacketForm,"source",e)},expression:"timePacketForm.source"}},t._l(t.sourceType,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"绑定状态"},on:{change:t.bindChange},model:{value:t.timePacketForm.binded,callback:function(e){t.$set(t.timePacketForm,"binded",e)},expression:"timePacketForm.binded"}},t._l(t.statusList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入时长"},model:{value:t.timePacketForm.timesLength,callback:function(e){t.$set(t.timePacketForm,"timesLength",e)},expression:"timePacketForm.timesLength"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-3 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择绑定的设备或序列号"},model:{value:t.timePacketForm.deviceSearch,callback:function(e){t.$set(t.timePacketForm,"deviceSearch",e)},expression:"timePacketForm.deviceSearch"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2  p-0 my-wth"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getPersonList}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                                ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                                ")])])])])]),t._v(" "),a("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"140"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.row.transfered,expression:"0 === scope.row.transfered"}],attrs:{title:"转让",type:"primary",icon:"el-icon-share",round:"",size:"mini"},on:{click:function(a){t.gooperation(e.row,1)}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=e.row.binded&&1!=e.row.transfered,expression:"1 != scope.row.binded && 1 != scope.row.transfered"}],attrs:{title:"绑定",type:"primary",icon:"el-icon-s-check",round:"",size:"mini"},on:{click:function(a){t.gooperation(e.row,2)}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.transfered&&1===e.row.binded,expression:"0 == scope.row.transfered && 1 === scope.row.binded"}],staticStyle:{background:"transparent",border:"none",cursor:"default"},attrs:{title:"",type:"",icon:"el-icon-open",round:"",size:"mini"}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"批量导入",visible:t.importPop,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(e){t.importPop=e}}},[a("div",{staticStyle:{padding:"0px"}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("点击下载Excel模板")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("a",{attrs:{href:t.imgurl+"/static/excel/person.xls"}},[t._v("开始下载Excel导入模板.xls")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v("（Excel导入模板表头红色必填）")])])]),t._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("选择.zip文件")]),t._v(" "),a("div",{staticClass:"col-sm-9 upload-zip"},[a("el-upload",{ref:"upload",attrs:{name:"file",limit:1,"with-credentials":!0,"file-list":t.fileList,action:t.exportUrl+t.appId,data:t.uploadData,"auto-upload":!1,"on-exceed":t.exceed,"on-change":t.selectChange,"on-error":t.uploadErr,"before-upload":t.beforeAvatarUpload,"on-success":t.successCheck,"on-remove":t.removeFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传")])],1)],1)]),t._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("导入须知")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[t._v("\n                  1、上传文件大小最大为："),a("span",{staticStyle:{color:"red"}},[t._v("128MB")]),t._v("；"),a("br"),t._v("\n                  2、excel文件跟人员图片需要放在"),a("span",{staticStyle:{color:"red"}},[t._v("同一层级目录")]),t._v("，如图片放在(批量导入目录)则excel文件也要放在该目录下；"),a("br"),t._v("\n                  3、目前仅支持上传"),a("span",{staticStyle:{color:"red"}},[t._v("zip格式")]),t._v("压缩文件，将文件夹压缩时请选择正确的压缩格式；"),a("span",{staticStyle:{color:"red"}},[t._v("excel模板请下载上方指定的模板")]),t._v("；"),a("br"),t._v("\n                  4、人员与图片的对应方式为根据excel文件人脸图片进行获取，如果当前导入用户 存在人脸图片，请将图片名称填入此列;"),a("br"),t._v("\n                  5、当人脸图片列为空时，会根据人员姓名去进行一次对应的图片获取，如人员姓名为李四，会去获取一次图片名称为李四的文件；"),a("br"),t._v("\n                  6、若无excel文件，仅有图片，则人脸图片名称格式为："),a("span",{staticStyle:{color:"red"}},[t._v("姓名_人员编号")])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.importPop=!1}}},[t._v("关闭")])],1)])],1),t._v(" "),t.showViewer?a("el-image-viewer",{attrs:{"on-close":t.closeViewer,"url-list":t.previewImg}}):t._e(),t._v(" "),a("export-box",{ref:"exportData",attrs:{exportPopVisible:t.outPop,isExport:t.isExport},on:{"update:exportPopVisible":function(e){t.outPop=e},"update:isExport":function(e){t.isExport=e}}}),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset",attrs:{title:"导入失败数据",visible:t.exporterrPop,width:"60%"},on:{"update:visible":function(e){t.exporterrPop=e}}},[a("div",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:t.exportErrList,"max-height":"250",border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[a("el-table-column",{attrs:{property:"personName",label:"姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{property:"phone",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"icNum",label:"IC卡",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"personSubtype",label:"住户类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.personSubtype?a("span",[t._v("户主")]):t._e(),t._v(" "),"2"==e.row.personSubtype?a("span",[t._v("家庭成员")]):t._e(),t._v(" "),"3"==e.row.personSubtype?a("span",[t._v("租客")]):t._e(),t._v(" "),"5"==e.row.personSubtype?a("span",[t._v("其他")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"buildName",label:"楼栋",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"unitName",label:"单元",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"houseName",label:"房号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"errorMsg",label:"失败原因","min-width":"120"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exporterrPop=!1}}},[t._v("取 消")])],1)]),t._v(" "),a("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}}),t._v(" "),a("el-dialog",{attrs:{title:"创建订单",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeNamePaytype,callback:function(e){t.activeNamePaytype=e},expression:"activeNamePaytype"}},[a("el-tab-pane",{attrs:{label:"时长包",name:"first"}},[a("el-row",{attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[t._v("规格")]),t._v(" "),a("el-col",{attrs:{span:19}},[a("el-radio-group",{on:{change:function(e){t.radioChangeG(e)}},model:{value:t.timesLength,callback:function(e){t.timesLength=e},expression:"timesLength"}},t._l(t.durationGoodsList,function(e,i){return a("el-radio-button",{key:i,attrs:{label:e.id}},[t._v(t._s(e.specificationDesc))])}))],1)],1),t._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[t._v("购买数量")]),t._v(" "),a("el-col",{attrs:{span:19}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入购买数量",onkeyup:"value=value.replace(/[^\\d]/g,'')"},on:{change:t.changeNumTimes},model:{value:t.tiemsNum,callback:function(e){t.tiemsNum=t._n(e)},expression:"tiemsNum"}}),t._v(" 个\n                 ")],1)],1),t._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[t._v("总价")]),t._v(" "),a("el-col",{attrs:{span:19}},[a("span",[t._v(t._s(t.timesTotal)+"元")])])],1),t._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[t._v("有效期至")]),t._v(" "),a("el-col",{attrs:{span:19}},[a("span",[t._v(t._s(t.usefulLife))])])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[t._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"导入",visible:t.exportVisible,width:"30%"},on:{"update:visible":function(e){t.exportVisible=e}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("el-input",{attrs:{type:"textarea",placeholder:"请将激活码输入到该输入框"},model:{value:t.activationCode,callback:function(e){t.activationCode=e},expression:"activationCode"}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exportVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exportVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"转让给以下机构",visible:t.transferInstitutionVisible,width:"30%"},on:{"update:visible":function(e){t.transferInstitutionVisible=e}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("el-tree",{attrs:{props:t.props,load:t.loadNode,lazy:"","show-checkbox":""},on:{"check-change":t.handleCheckChange}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.transferInstitutionVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.transferInstitutionVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择机构",visible:t.mechanismDialogVisible,width:"20%"},on:{"update:visible":function(e){t.mechanismDialogVisible=e}}},[a("div",{staticClass:"device-list"},[a("el-radio-group",{model:{value:t.selectMechanism,callback:function(e){t.selectMechanism=e},expression:"selectMechanism"}},t._l(t.mechanismList,function(e,i){return a("el-radio-button",{key:i,attrs:{label:e.orgId}},[t._v(t._s(e.orgName))])}))],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.mechanismDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[t._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:t.checkedMechanism}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:t.deviceDialogVisible,width:"20%"},on:{"update:visible":function(e){t.deviceDialogVisible=e}}},[a("div",{staticClass:"device-list"},[a("el-radio-group",{model:{value:t.selectDevice,callback:function(e){t.selectDevice=e},expression:"selectDevice"}},t._l(t.deviceList,function(e,i){return a("el-radio-button",{key:i,attrs:{label:e.serial}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deviceDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[t._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:t.checkedDevide}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"pay-orcode",attrs:{title:"请使用微信支付",visible:t.payDialogVisible,width:"15%"},on:{"update:visible":function(e){t.payDialogVisible=e}}},[a("div",{staticClass:"row"},[a("el-image",{staticStyle:{width:"100%",height:"220px"},attrs:{src:t.payImg}}),t._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[t._v("订单号 :")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",[t._v(t._s(t.orderName))])])],1),t._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[t._v("购买数量 :")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",[t._v(t._s(t.payNum))])])],1),t._v(" "),a("el-row",{staticClass:"mt-10 mb-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[t._v("支付金额 :")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",[t._v(t._s(t.orderAmount)+" 元")])])],1)],1)])],1)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n        视频资源 - 时长包\n          ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n            ")])]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 时长包\n          ")])])])}],b={render:h,staticRenderFns:m},g=b,v=a("VU/8"),f=i,x=v(u,g,!1,f,"data-v-667661c5",null);e.default=x.exports},"eu1/":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'\n.el-card[data-v-667661c5]{width:98.2%;margin:15px auto 0 auto;border-top:3px solid #3c8dbc\n}\n.wrapper-content[data-v-667661c5]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.content_video[data-v-667661c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:25px;width:65%\n}\n.video-box[data-v-667661c5]{position:relative;width:100%\n}\n.video-box1[data-v-667661c5]{width:calc(calc(100% / 2) - 10px);margin:2px 2px\n}\n.video-box2[data-v-667661c5]{width:calc(calc(100% / 3) - 10px);margin:2px 2px\n}\n.warpper-topBox[data-v-667661c5]{width:225px;margin:0  auto 25px auto\n}\n.content_left[data-v-667661c5]{width:20%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.content_left span[data-v-667661c5]{font-size:16px;margin-top:25px\n}\n.content_left[data-v-667661c5] .el-input{width:100%\n}\n.el_tabs[data-v-667661c5]{margin-top:25px;width:100%\n}\n.el_tabs [class^="el-icon-"][data-v-667661c5],.el_tabs [class*=" el-icon-"][data-v-667661c5]{margin:0 5px;color:#3c8dbc\n}\n.el_tabs .btn-group-box[data-v-667661c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.el_tabs .btn-group-box>div[data-v-667661c5]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.el_tabs .all-group[data-v-667661c5]{height:42px;line-height:42px;padding-left:20px;border:1px solid #ddd;border-bottom:0\n}\n@media (max-width: 1200px){\n.el_tabs .btn-group-box[data-v-667661c5]{margin-top:15px\n}\n}\n.el_tabs .el-tab-pane[data-v-667661c5]{padding-bottom:10px\n}\n.el_tabs .set-pop[data-v-667661c5] .el-dialog__body{padding:0 20px\n}\n.el_tabs .set-pop[data-v-667661c5] .icon-warning{color:#E6A23C;font-size:24px !important\n}\n.el_tabs .set-pop[data-v-667661c5] .tip{color:red;display:block;margin:5px 0\n}\n.el_tabs .check-btn[data-v-667661c5]{cursor:pointer\n}\n.el_tabs .upload-zip[data-v-667661c5] .el-upload-list__item{width:60%\n}\n.el_tabs .upload-zip[data-v-667661c5] .el-upload-list__item a{font-size:16px\n}\n.el_tabs .grant-box[data-v-667661c5]{text-align:left;cursor:pointer\n}\n.el_tabs .grant-box>div[data-v-667661c5]{height:6px;background:#00a65a;border-radius:3px\n}\n.el_tabs .grant-box>div.grant-color-s[data-v-667661c5]{width:100%;background:#00a65a\n}\n.el_tabs .grant-box>div.grant-color-f[data-v-667661c5]{width:0;background:#dd4b39\n}\n.el_tabs .grant-box>div.grant-color-half[data-v-667661c5]{width:50%;background:#e6a23c\n}\n.el_tabs .grant-box>span[data-v-667661c5]{padding:0px 6px;height:18px;display:inline-block;border-radius:10px;text-align:center;color:#fff;line-height:18px;font-size:12px\n}\n.el_tabs .grant-box>span.grant-num-s[data-v-667661c5]{background:#00a65a\n}\n.el_tabs .grant-box>span.grant-num-f[data-v-667661c5]{background:#dd4b39\n}\n.el_tabs .grant-box>span.grant-num-half[data-v-667661c5]{background:#e6a23c\n}\n.active_A[data-v-667661c5]{color:blue\n}\n.video-close[data-v-667661c5]{position:absolute;right:5%;top:6%;cursor:pointer;color:#ffffff\n}\n.Camera_box[data-v-667661c5]{position:relative;margin:0 20px;width:165px;height:170px\n}\n.Camera_box .img_box img[data-v-667661c5]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);cursor:pointer\n}\n.Camera_box .img_box1[data-v-667661c5]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box2[data-v-667661c5]{position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box3[data-v-667661c5]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box4[data-v-667661c5]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.my-wth[data-v-667661c5]{width:13%\n}\n.flex-style[data-v-667661c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end\n}\n.el-row[data-v-667661c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.device-list[data-v-667661c5]{max-height:407px;overflow-y:scroll\n}\n.device-list .el-radio-group[data-v-667661c5]{width:100%\n}\n.device-list .el-radio-button[data-v-667661c5]{display:block;width:100%\n}\n.device-list .el-radio-button[data-v-667661c5] .el-radio-button__inner{width:100%;border-left:1px solid #DCDFE6\n}\n',""])}});