webpackJsonp([1],{"1alW":function(e,t,i){var a=i("kM2E");a(a.S,"Number",{isInteger:i("AKgy")})},AKgy:function(e,t,i){var a=i("EqjI"),o=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&o(e)===e}},Hupx:function(e,t,i){var a=i("ZzpL");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("ffe2dd30",a,!0)},"RRo+":function(e,t,i){e.exports={default:i("c45H"),__esModule:!0}},ZzpL:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,'\n.el-card[data-v-3a64dc15]{width:98.2%;margin:15px auto 0 auto;border-top:3px solid #3c8dbc\n}\n.wrapper-content[data-v-3a64dc15]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.content_video[data-v-3a64dc15]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:25px;width:65%\n}\n.video-box[data-v-3a64dc15]{position:relative;width:100%\n}\n.video-box1[data-v-3a64dc15]{width:calc(calc(100% / 2) - 10px);margin:2px 2px\n}\n.video-box2[data-v-3a64dc15]{width:calc(calc(100% / 3) - 10px);margin:2px 2px\n}\n.warpper-topBox[data-v-3a64dc15]{width:225px;margin:0  auto 25px auto\n}\n.content_left[data-v-3a64dc15]{width:20%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.content_left span[data-v-3a64dc15]{font-size:16px;margin-top:25px\n}\n.content_left[data-v-3a64dc15] .el-input{width:100%\n}\n.el_tabs[data-v-3a64dc15]{margin-top:25px;width:100%\n}\n.el_tabs [class^="el-icon-"][data-v-3a64dc15],.el_tabs [class*=" el-icon-"][data-v-3a64dc15]{margin:0 5px;color:#3c8dbc\n}\n.el_tabs .btn-group-box[data-v-3a64dc15]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.el_tabs .btn-group-box>div[data-v-3a64dc15]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.el_tabs .all-group[data-v-3a64dc15]{height:42px;line-height:42px;padding-left:20px;border:1px solid #ddd;border-bottom:0\n}\n@media (max-width: 1200px){\n.el_tabs .btn-group-box[data-v-3a64dc15]{margin-top:15px\n}\n}\n.el_tabs .el-tab-pane[data-v-3a64dc15]{padding-bottom:10px\n}\n.el_tabs .set-pop[data-v-3a64dc15] .el-dialog__body{padding:0 20px\n}\n.el_tabs .set-pop[data-v-3a64dc15] .icon-warning{color:#E6A23C;font-size:24px !important\n}\n.el_tabs .set-pop[data-v-3a64dc15] .tip{color:red;display:block;margin:5px 0\n}\n.el_tabs .check-btn[data-v-3a64dc15]{cursor:pointer\n}\n.el_tabs .upload-zip[data-v-3a64dc15] .el-upload-list__item{width:60%\n}\n.el_tabs .upload-zip[data-v-3a64dc15] .el-upload-list__item a{font-size:16px\n}\n.el_tabs .grant-box[data-v-3a64dc15]{text-align:left;cursor:pointer\n}\n.el_tabs .grant-box>div[data-v-3a64dc15]{height:6px;background:#00a65a;border-radius:3px\n}\n.el_tabs .grant-box>div.grant-color-s[data-v-3a64dc15]{width:100%;background:#00a65a\n}\n.el_tabs .grant-box>div.grant-color-f[data-v-3a64dc15]{width:0;background:#dd4b39\n}\n.el_tabs .grant-box>div.grant-color-half[data-v-3a64dc15]{width:50%;background:#e6a23c\n}\n.el_tabs .grant-box>span[data-v-3a64dc15]{padding:0px 6px;height:18px;display:inline-block;border-radius:10px;text-align:center;color:#fff;line-height:18px;font-size:12px\n}\n.el_tabs .grant-box>span.grant-num-s[data-v-3a64dc15]{background:#00a65a\n}\n.el_tabs .grant-box>span.grant-num-f[data-v-3a64dc15]{background:#dd4b39\n}\n.el_tabs .grant-box>span.grant-num-half[data-v-3a64dc15]{background:#e6a23c\n}\n.active_A[data-v-3a64dc15]{color:blue\n}\n.video-close[data-v-3a64dc15]{position:absolute;right:5%;top:6%;cursor:pointer;color:#ffffff\n}\n.Camera_box[data-v-3a64dc15]{position:relative;margin:0 20px;width:165px;height:170px\n}\n.Camera_box .img_box img[data-v-3a64dc15]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);cursor:pointer\n}\n.Camera_box .img_box1[data-v-3a64dc15]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box2[data-v-3a64dc15]{position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box3[data-v-3a64dc15]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box4[data-v-3a64dc15]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.red[data-v-3a64dc15]{background-color:red\n}\n.yellow[data-v-3a64dc15]{background-color:yellow\n}\n.green[data-v-3a64dc15]{background-color:#00a65a\n}\n.my-wth[data-v-3a64dc15]{width:13%\n}\n.flex-style[data-v-3a64dc15]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end\n}\n.device-list[data-v-3a64dc15]{max-height:407px;overflow-y:scroll\n}\n.device-list .el-checkbox-group[data-v-3a64dc15]{width:100%\n}\n.device-list .el-checkbox-button[data-v-3a64dc15]{display:block;width:100%\n}\n.device-list .el-checkbox-button[data-v-3a64dc15] .el-checkbox-button__inner{width:100%;border-left:1px solid #DCDFE6\n}\n[data-v-3a64dc15] .el-transfer .el-transfer-panel{width:372px\n}\n.pool-dialog[data-v-3a64dc15] .el-dialog__body{padding:20px 20px 0 20px\n}\n.pool-dialog[data-v-3a64dc15] .el-dialog__body .el-form--label-top .el-form-item__label{padding:0\n}\n',""])},c45H:function(e,t,i){i("1alW"),e.exports=i("FeBl").Number.isInteger},lt5g:function(e,t,i){"use strict";function a(e){i("Hupx")}Object.defineProperty(t,"__esModule",{value:!0});var o,s=i("bOdI"),l=i.n(s),r=i("RRo+"),n=i.n(r),c=i("TtmE"),d=i("D7x1"),p=i("7lXo"),u=i("5Wmi"),h=i("pOg+"),g=i("18Ef"),b=i("lbHh"),v=i.n(b),m={name:"home",data:function(){return{msg:"视频资源-时长包",isBtn:!1,currentPage:1,currentPage1:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",total:0,isCreate:!0,poolId:"",multipleSelection:[],tableData:[],tableLabel:[{label:"id",param:"id",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"orgId",param:"orgId",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"创建时间",param:"createTime",align:"center",sortable:!0,isshow:!0,width:"120"},{slot:"editResourceName",isshow:!0},{label:"机构数",param:"orgNum",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"项目(车场)数",param:"appNum",align:"center",isshow:!0,sortable:!0,width:"120"},{slot:"editPackageNum",isshow:!0},{slot:"devicesNum",isshow:!0},{slot:"parallelNum",isshow:!0},{slot:"operate1",isshow:!0},{slot:"operate",isshow:!0}],tableData1:[],tableLabel1:[{label:"ID",param:"id",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"播放量",param:"specificationDesc",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"播放时长",param:"durationDesc",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"可用设备数",param:"limitDeviceNum",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"购买时间",param:"purchaseTimeFormat",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"剩余时间",param:"remainingSecondsFormat",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"来源",param:"sourceFormat",align:"center",isshow:!0,sortable:!0,width:"80"}],isOperate:!1,deviceDialogVisible:!1,deviceToal:0,selectDevice:[],tableOption:[],tableSelect:[],activeName:"first",isShowSelect:!0,isShowSelect1:!0,personType:[{value:"1",label:"户主"},{value:"2",label:"家庭成员"},{value:"3",label:"租客"},{value:"5",label:"其他"}],poolForm:{resourcesName:"",limitParallelNumPerDevice:3},rules:{resourcesName:[{required:!0,message:"请输入资源池名称",trigger:"blur"}],limitParallelNumPerDevice:[{required:!0,validator:function(e,t,i){if(!t)return i(new Error("客户端播放数不能为空"));setTimeout(function(){n()(parseInt(t))?(console.log("@@@",t),parseInt(t)<1?i(new Error("客户端播放数不能少于1")):parseInt(t)>99?i(new Error("客户端播放数不能大于99")):i()):i(new Error("请输入数字值"))},1e3)},trigger:"blur"}]},dedicatedPoolDialogVisible:!1,selectdeDicatedPool:"",resourceList:{orgId:v.a.get("orgId"),name:"",currentPage:1,pageSize:10},unbindDeviceForm:{deviceIdList:null,orgId:"",poolId:""},VideoPayDialogVisible:!1,tableData2:[],tableLabel2:[{label:"机构",param:"orgId",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"项目(车场)",param:"appName",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"设备序列号",param:"deviceSn",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"设备名称",param:"deviceName",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"总播放时长",param:"playSeconds",align:"center",isshow:!0,sortable:!0,width:"80"},{slot:"online",isshow:!0},{label:"播流客户端",param:"playClientNum",align:"center",isshow:!0,sortable:!0,width:"80"},{slot:"operate",isshow:!0}],isShowSelect2:!0,currentPage2:1,total2:0,selectTab:"first",orgIdToDevice:[],selectOrgId:[],orgIdListDefaultProps:{key:"id",label:"name"},appIdToDevice:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],appIdDefaultProps:{children:"subsList",label:"name"},containChild:!1,checkedAppIds:[],PersonListForm:{appId:"",pageNum:1,pageSize:10,personName:"",subtype:"",groupId:""},PersonListForm1:{appId:"",pageNum:1,pageSize:10,personName:"",subtype:"",time:"",bindStatus:""},total1:0,specialPageForm:{currentPage:1,pageSize:10,orgId:v.a.get("orgId"),category:2,binded:0},resourcePoolBindedDeviceForm:{appId:"",currentPage:1,deviceSearch:"",orgId:v.a.get("orgId"),pageSize:10,playIng:"",specialId:""},isFlag:!0,payStatusList:[{name:"全部",id:""},{name:"播放中",id:1},{name:"未播放",id:0}],orgIdList:[],appIdList:[],deviceList:[],resourcePoolId:"",currentSpecialId:"",specializedParallelForm:{appId:"",currentPage:1,deviceSearch:"",orgId:v.a.get("orgId"),pageSize:10,playIng:"",specialId:""},orgIdDefaultProps:{key:"id",label:"name"},tableOption1:[],tableSelect1:[],deviceListForm:{appId:"",currentPage:1,orgId:v.a.get("orgId"),pageSize:10,searchStr:""},tableData5:[],tableLabel5:[{label:"设备名称",param:"name",align:"left",sortable:!0,isshow:!0,width:"80"},{label:"设备S/N",param:"serial",align:"left",isshow:!0,sortable:!0,width:"80"},{label:"IP",param:"ip",align:"left",isshow:!0,sortable:!0,width:"120"},{label:"软件版本",param:"protocolVersion",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"状态",param:"online",align:"center",isshow:!0,sortable:!0,width:"80"}],isShowSelect5:!0,currentPage5:1,total5:0,loading:!1,loading1:!1,loading2:!1,loading3:!1,loading4:!1,cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",checkStrictly:!0,expandTrigger:"hover"},bindStatus:[{value:"0",label:"待物业审核"},{value:"1",label:"户主审核通过"},{value:"2",label:"户主审核未通过"},{value:"3",label:"物业审核通过"},{value:"4",label:"物业审核未通过"},{value:"5",label:"待户主审核"},{value:"8",label:"已取消"},{value:"9",label:"已绑定"}],popIndex:1,checkPopVisible:!1,checkPopTitle:"审核",checkForm:{bindStatus:"",id:"",bindFailReseaon:""},checkMsg:"",showCheckTip:!1,outPop:!1,outChecked:!1,previewImg:[],showViewer:!1,imgurl:"",tabIndex:0,importPop:!1,fileList:[],uploadData:{appId:""},authPopVisible:!1,authPopTitle:"",authId:"",authName:"",isExport:!1,exportUrl:"",exportErrList:[],exporterrPop:!1,timer:null,elcascaderkey:1,transferType:"我的",timePacketForm:{source:"",timesLength:""},sourceType:[{name:"购买",id:1},{name:"赠送",id:2}],statusList:[{name:"全部",id:0},{name:"已绑定",id:1},{name:"为绑定",id:2}],dialogVisible:!1,activeNamePaytype:"first",exportVisible:!1,activationCode:"",transferInstitutionVisible:!1,props:{label:"name",children:"zones"},count:1}},filters:{},created:function(){for(var e=0;e<this.tableLabel.length;e++)this.tableLabel[e].label&&this.tableOption.push(this.tableLabel[e].label),this.tableLabel[e].isshow&&this.tableSelect.push(this.tableLabel[e].label);this.imgurl=this.tools.global.API_URL},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(e){this.$store.commit("changeProjectId",e)}}},watch:{},components:{MsgBox:c.a,TableCmp:d.a,TableBmp:p.a,ElImageViewer:u.a,ExportBox:h.a,AuthBox:g.a},mounted:function(){this.getTableData()},methods:(o={paySelect:function(){this.isCreate=!0,this.poolForm.resourcesName="",this.poolForm.limitParallelNumPerDevice=3,this.dialogVisible=!0},exportModel:function(){this.exportVisible=!0},handleCheckChange:function(e,t,i){console.log(e,t,i)},handleNodeClick:function(e){console.log(e)},loadNode:function(e,t){var i=this;if(0===e.level)return t([{name:"region1"},{name:"region2"}]);if(e.level>3)return t([]);var a;a="region1"===e.data.name||"region2"!==e.data.name&&Math.random()>.5,setTimeout(function(){var e;e=a?[{name:"zone"+i.count++},{name:"zone"+i.count++}]:[],t(e)},500)},elCascaderOnlick:function(){var e=this;setTimeout(function(){document.querySelectorAll(".el-cascader-node__label").forEach(function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.elcascader.dropDownVisible=!1}}),document.querySelectorAll(".el-cascader-panel .el-radio").forEach(function(t){t.onclick=function(){e.$refs.elcascader.dropDownVisible=!1}})},100)},assignmentBtn:function(){this.transferInstitutionVisible=!0},checkboxChange:function(e){for(var t=0;t<this.tableLabel.length;t++)this.tableSelect.indexOf(this.tableLabel[t].label)>-1?this.tableLabel[t].isshow=!0:this.tableLabel[t].isshow=!1},checkboxChange1:function(e){for(var t=0;t<this.tableLabel1.length;t++)this.tableSelect1.indexOf(this.tableLabel1[t].label)>-1?this.tableLabel1[t].isshow=!0:this.tableLabel1[t].isshow=!1},creatResources:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.isBtn=!0,t.utils.http({url:"/pool/specialized/update",method:"POST",data:t.isCreate?{orgId:v.a.get("orgId"),poolName:t.poolForm.resourcesName,limitParallelNumPerDevice:parseInt(t.poolForm.limitParallelNumPerDevice)}:{orgId:v.a.get("orgId"),poolName:t.poolForm.resourcesName,limitParallelNumPerDevice:parseInt(t.poolForm.limitParallelNumPerDevice),poolId:t.poolId}},function(e){t.isBtn=!1,200==e.code&&(t.dialogVisible=!1,t.utils.tip("success","创建成功!"),t.getTableData())})})},getDedicatedPoollist:function(){var e=this;this.loading1=!0,this.utils.http({url:"/videoPackage/search",method:"POST",data:this.specialPageForm},function(t){e.loading1=!1,200==t.code&&(e.total1=t.data.total,e.tableData1=t.data.records,e.currentPage1=t.data.current)})},addParallel:function(e){this.resourcePoolId=e,this.isShowSelect1=!0,this.isOperate=!0,this.dedicatedPoolDialogVisible=!0,this.specialPageForm.binded=0,this.getDedicatedPoollist()},addDevice:function(e,t){this.deviceDialogVisible=!0,this.resourcePoolId=e,this.deviceListForm.appId="",this.deviceListForm.currentPage=1,this.deviceListForm.deviceSearch="",this.deviceListForm.orgId=v.a.get("orgId"),this.deviceListForm.pageSize=10,this.getmechanism(),this.getApplist(v.a.get("orgId")),this.getDeviceList()},getDeviceList:function(){var e=this;this.selectDevice=[],this.loading4=!0,this.utils.http({url:"/pool/specialized/search/allow/device/page",method:"POST",data:this.deviceListForm},function(t){e.loading4=!1,200==t.code&&(e.total5=t.data.total,e.tableData5=t.data.records,e.currentPage5=t.data.current)})},checkedDevide:function(){var e=this,t=[],i=this.$refs.tableChild5.selectData;if(console.log(i),0===i.length)return void this.$message.error("请选择设备");t=i.map(function(e){return e.id}),this.isBtn=!0,this.utils.http({url:"/pool/specialized/plus/special/device",method:"POST",data:{orgId:v.a.get("orgId"),deviceIdList:t,poolId:this.resourcePoolId}},function(t){e.isBtn=!1,200==t.code&&(e.deviceDialogVisible=!1,e.utils.tip("success","添加设备成功!"),e.getTableData())})},editPoolName:function(e){console.log(e),this.isCreate=!1,this.poolForm.resourcesName=e.name,this.poolForm.limitParallelNumPerDevice=e.limitParallelNumPerDevice||3,this.poolId=e.id,this.dialogVisible=!0},editPackageSpecialized:function(){this.getDedicatedPoollist(),this.isShowSelect1=!1,this.isOperate=!1,this.specialPageForm.binded=1,this.dedicatedPoolDialogVisible=!0},unbindDevice:function(e){var t=this;this.$confirm("您确信要解绑该设备吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.unbindDeviceForm.deviceIdList=[e],t.unbindDeviceForm.orgId=t.resourcePoolBindedDeviceForm.orgId,t.unbindDeviceSend()}).catch(function(){})},unbindDeviceAll:function(){var e=this.$refs.tableChild2.selectData;if(console.log(e),0===e.length)return void this.$message.error("请选择要解绑的设备");var t=[];e.forEach(function(e){t.push(e.deviceId)}),this.unbindDeviceForm.deviceIdList=t,this.unbindDeviceForm.orgId=this.resourcePoolBindedDeviceForm.orgId,this.unbindDeviceSend()},unbindDeviceSend:function(){var e=this;this.utils.http({url:"/pool/specialized/subtract/special/device",method:"POST",data:this.unbindDeviceForm},function(t){200==t.code&&(e.isFlag=!0,e.resourcePoolBindedDeviceForm.playIng="",e.resourcePoolBindedDeviceForm.appId="",e.resourcePoolBindedDeviceForm.currentPage=1,e.resourcePoolBindedDeviceForm.deviceSearch="",e.resourcePoolBindedDeviceForm.orgId=v.a.get("orgId"),e.resourcePoolBindedDeviceForm.pageSize=10,e.getResourcePoolBindedDevices())})},stopPush:function(e){var t=this;this.utils.http({url:"/pool/specialized/play/client/close?deviceId="+e,method:"POST"},function(e){200==e.code&&(t.utils.tip("success","该设备停止推流成功!"),t.isFlag=!0,t.resourcePoolBindedDeviceForm.playIng="",t.resourcePoolBindedDeviceForm.appId="",t.resourcePoolBindedDeviceForm.currentPage=1,t.resourcePoolBindedDeviceForm.deviceSearch="",t.resourcePoolBindedDeviceForm.orgId=v.a.get("orgId"),t.resourcePoolBindedDeviceForm.pageSize=10,t.this.getResourcePoolBindedDevices())})},editParallel:function(e){this.isFlag=!1,this.resourcePoolBindedDeviceForm.playIng=1,this.resourcePoolBindedDeviceForm.appId="",this.resourcePoolBindedDeviceForm.currentPage=1,this.resourcePoolBindedDeviceForm.deviceSearch="",this.resourcePoolBindedDeviceForm.orgId=v.a.get("orgId"),this.resourcePoolBindedDeviceForm.pageSize=10,this.resourcePoolBindedDeviceForm.specialId=e.id,this.unbindDeviceForm.poolId=e.id,this.getmechanism(),this.getApplist(v.a.get("orgId")),this.getResourcePoolBindedDevices(),this.VideoPayDialogVisible=!0},getLeftData:function(){var e=this;this.cascaderData=[],this.utils.http({url:"/base/house/list",method:"GET",params:{appId:this.appId}},function(t){200==t.code&&t.data.groups&&(e.cascaderData=t.data.groups)})},getTableData:function(){var e=this;this.loading=!0,this.utils.http({url:"/pool/specialized/search/page",method:"POST",data:this.resourceList},function(t){e.loading=!1,200==t.code&&(e.total=t.data.total,e.tableData=t.data.records,e.currentPage=t.data.current)})},checkedDedicatedPool:function(){var e=this,t=this.$refs.tableChild1.selectData;if(0===t.length)return void this.$message.error("请选择专线包");var i=[];t.forEach(function(e,t){i.push(e.id)});var a={orgId:v.a.get("orgId"),packageIdList:i,poolId:this.resourcePoolId};this.utils.http({url:"/pool/specialized/plus/special/package",method:"POST",data:a},function(t){200==t.code&&(e.dedicatedPoolDialogVisible=!1,e.utils.tip("success","添加专线包绑定到资源池成功"),e.getTableData())})},editDevice:function(e){this.isFlag=!0,this.isOperate=!0,this.resourcePoolBindedDeviceForm.playIng="",this.resourcePoolBindedDeviceForm.appId="",this.resourcePoolBindedDeviceForm.currentPage=1,this.resourcePoolBindedDeviceForm.deviceSearch="",this.resourcePoolBindedDeviceForm.orgId=v.a.get("orgId"),this.resourcePoolBindedDeviceForm.pageSize=10,this.resourcePoolBindedDeviceForm.specialId=e.id,this.unbindDeviceForm.poolId=e.id,this.getmechanism(),this.getApplist(v.a.get("orgId")),this.getResourcePoolBindedDevices(),this.VideoPayDialogVisible=!0},getResourcePoolBindedDevices:function(){var e=this;this.loading2=!0,this.utils.http({url:this.isFlag?"/pool/specialized/search/device/page":"/pool/specialized/search/parallel/page",method:"POST",data:this.resourcePoolBindedDeviceForm},function(t){e.loading2=!1,200==t.code&&(e.total2=t.data.total,e.tableData2=t.data.records,e.currentPage2=t.data.current)})},radioChangeS:function(){this.getResourcePoolBindedDevices()},getApplist:function(e){var t=this;this.utils.http({url:"/org/search/child/app?orgId="+e,method:"POST"},function(e){200==e.code&&(e.data&&e.data.length>0?t.appIdList=e.data:t.appIdList=[])})},getmechanism:function(){var e=this;this.utils.http({url:"/org/search/select?orgId="+v.a.get("orgId"),method:"POST"},function(t){200==t.code&&(e.orgIdList=t.data)})},deviceOrgChange:function(e){this.getApplist(e)},videoOrgchang:function(e){this.getApplist(e)},getSpecializedInfo:function(e){var t=this;this.loading3=!0,this.utils.http({url:"/pool/specialized/search/set/info",method:"POST",data:{orgId:v.a.get("orgId"),specialId:e}},function(e){if(t.loading3=!1,200==e.code){t.$refs.tree.setCheckedKeys([]);var i=[];t.orgIdToDevice=e.data.allOrgList.filter(function(e){return e.name&&e.id})||[],e.data.boundOgrList&&e.data.boundOgrList.length>0?t.selectOrgId=e.data.boundOgrList.map(function(e){return e.id})||[]:t.selectOrgId=[],t.appIdToDevice=e.data.appTreeList.filter(function(e){return e.name&&e.id})||[],e.data.appTreeList.forEach(function(e,t){e.subsList&&e.subsList.length>0&&e.subsList.forEach(function(e,t){e.bindStatus&&i.push(e.id)})}),t.containChild=1===e.data.containChild,t.checkedAppIds=i}})}},l()(o,"handleNodeClick",function(e,t){t.checked=!t.checked}),l()(o,"setDataInfo",function(){var e=this;console.log(this.selectTab);var t={};if("first"==this.selectTab)t.containChild=this.containChild?1:0,t.operateType=1,t.orgId=v.a.get("orgId"),t.orgIdList=this.selectOrgId,t.specialId=this.currentSpecialId;else{console.log("a:",this.$refs.tree.getCheckedNodes());var i=this.$refs.tree.getCheckedNodes();0<i.length?(t.operateType=2,t.orgId=v.a.get("orgId"),t.appIdList=this.setRecombinationData(i),t.specialId=this.currentSpecialId):(t.operateType=2,t.orgId=v.a.get("orgId"),t.appIdList=[],t.specialId=this.currentSpecialId)}this.isBtn=!0,this.utils.http({url:"/pool/specialized/search/set",method:"POST",data:t},function(t){e.isBtn=!1,200==t.code&&(e.transferInstitutionVisible=!1,"first"==e.selectTab?(e.getTableData(),e.utils.tip("success","自动配置机构下的设备加入资源池成功")):e.utils.tip("success","自动配置项目下的设备加入资源池成功"))})}),l()(o,"setRecombinationData",function(e){var t=[];return e.forEach(function(e,i){e.subsList||t.push(e.id)}),t}),l()(o,"cascaderChange",function(e){e&&(this.PersonListForm.groupId=e[e.length-1])}),l()(o,"resetBtn",function(){this.resourceList={orgId:v.a.get("orgId"),name:"",currentPage:1,pageSize:10},this.getTableData()}),l()(o,"resetBtn1",function(){this.PersonListForm1={appId:this.appId,pageNum:1,pageSize:10,personName:"",subtype:"",time:"",bindStatus:""},this.getCheckList()}),l()(o,"resetBtn2",function(){this.resourcePoolBindedDeviceForm.appId="",this.resourcePoolBindedDeviceForm.currentPage=1,this.resourcePoolBindedDeviceForm.deviceSearch="",this.resourcePoolBindedDeviceForm.orgId=v.a.get("orgId"),this.resourcePoolBindedDeviceForm.pageSize=10,this.resourcePoolBindedDeviceForm.playIng="",this.getResourcePoolBindedDevices()}),l()(o,"resetBtn3",function(){this.deviceListForm={appId:"",currentPage:1,orgId:v.a.get("orgId"),pageSize:10,searchStr:""},this.getDeviceList()}),l()(o,"goEdit",function(e){this.selectTab="first",this.currentSpecialId=e.id,this.getSpecializedInfo(e.id),this.transferInstitutionVisible=!0}),l()(o,"deleteOwner",function(e){var t=this;this.$confirm("您确信删除选中的资源池吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.utils.http({url:"/pool/specialized/remove?poolId="+e,method:"post"},function(e){200==e.code&&(t.utils.tip("success","删除成功"),t.getTableData())})}).catch(function(){})}),l()(o,"goCheck",function(e){this.checkMsg=e.personName+",申请"+e.houseAddress,this.checkPopVisible=!0,this.popIndex=1,this.checkForm.id=e.id}),l()(o,"checkAgree",function(){this.checkForm.bindStatus=9,this.checkRequest()}),l()(o,"clickRefuse",function(){this.popIndex=2,this.checkPopTitle="请输入拒绝原因"}),l()(o,"cancelRefuse",function(){this.popIndex=1,this.checkPopTitle="审核",this.checkForm.bindFailReseaon="",this.showCheckTip=!1}),l()(o,"refuse",function(){this.checkForm.bindStatus=4,this.checkForm.bindFailReseaon?this.checkRequest():this.showCheckTip=!0}),l()(o,"checkRequest",function(){var e=this;this.utils.http({url:"/person/updateBindStatus",method:"POST",data:this.checkForm},function(t){200==t.code&&(e.checkPopVisible=!1,e.showCheckTip=!1,e.utils.tip("success","审核成功"),e.getCheckList())})}),l()(o,"closePop",function(){this.popIndex=1,this.checkPopTitle="审核",this.checkForm.bindFailReseaon=""}),l()(o,"open",function(){var e=this;this.timer=setTimeout(function(){e.popVisible=!1,clearTimeout(e.timer)},3e3)}),l()(o,"clearSetTimeOut",function(){clearTimeout(this.timer)}),l()(o,"batchDelete",function(){var e=this,t=[];this.$refs.tableChild.selectData.forEach(function(e,i){t.push(e.id)}),0==t.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请先选择要删除的住户",this.open()):this.$confirm("您确信删除选中的住户?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.utils.http({url:"/person/batchDeleteHousehold",method:"POST",data:{appId:e.appId,personIdList:t}},function(t){200==t.code&&(e.utils.tip("success","删除成功"),e.getTableData())})}).catch(function(){})}),l()(o,"goAdd",function(){this.$router.push({path:"/ownermanageadd",query:{type:"1"}})}),l()(o,"exportBtn",function(){this.outPop=!0}),l()(o,"outBtn",function(){var e=this;if(this.isExport=!0,0==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm.withPic=1:this.PersonListForm.withPic=0;var t=[];this.$refs.tableChild.selectData.forEach(function(e,i){t.push(e.id)}),this.PersonListForm.ids=t,this.utils.http({url:"/person/personExport",method:"POST",data:this.PersonListForm},function(t){e.isExport=!1,e.outPop=!1,delete e.PersonListForm.ids,200==t.code?e.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):e.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}else if(1==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm1.withPic=1:this.PersonListForm1.withPic=0;var i=[],a=this.$refs.tableChild1.selectData;a.forEach(function(e,t){i.push(e.id)}),this.PersonListForm1.ids=i,this.utils.http({url:"/person/houseExport",method:"POST",data:this.PersonListForm1},function(t){e.isExport=!1,e.outPop=!1,delete e.PersonListForm1.ids,200==t.code?e.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):e.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}}),l()(o,"onPreview",function(e){var t=this;this.previewImg=[],e.split(",").forEach(function(e,i){var a=t.imgurl+"/file/download?path="+e;t.previewImg.push(a)}),this.showViewer=!0}),l()(o,"closeViewer",function(){this.showViewer=!1}),l()(o,"handleSelectionChange",function(e){this.multipleSelection=e,console.log(this.multipleSelection)}),l()(o,"handleSizeChange",function(e){this.PersonListForm.pageSize=e,this.getTableData()}),l()(o,"handleCurrentChange",function(e){this.PersonListForm.currentPage=e,this.getTableData()}),l()(o,"handleSizeChange1",function(e){this.specialPageForm.pageSize=e,this.getDedicatedPoollist()}),l()(o,"handleCurrentChange1",function(e){this.specialPageForm.currentPage=e,this.getDedicatedPoollist()}),l()(o,"handleSizeChange2",function(e){}),l()(o,"handleCurrentChange2",function(e){}),l()(o,"handleSizeChange5",function(e){this.deviceListForm.pageSize=e,this.getDeviceList()}),l()(o,"handleCurrentChange5",function(e){this.deviceListForm.currentPage=e,this.getDeviceList()}),l()(o,"handleClick",function(e,t){0==e.index?this.tabIndex=0:1==e.index&&(this.tabIndex=1)}),l()(o,"submitUpload",function(){this.fileList.length>0?this.$refs.upload.submit():this.$message.error("请选择文件")}),l()(o,"selectChange",function(e,t){if(!["zip"].includes(e.name.substring(e.name.lastIndexOf(".")+1)))return this.$message.error("只支持.zip压缩文件"),this.fileList=[],!1;this.fileList=t}),l()(o,"beforeAvatarUpload",function(e,t){var i=e.name.substring(e.name.lastIndexOf(".")+1),a=["zip"],o=a.includes(i),s=e.size/1024/1024<128;return o?s?(this.importPop=!1,this.popVisible=!0,this.popTitle="提示",void(this.popContent="人员正在导入请稍后")):(this.$message.error("文件大小不能超过 128MB!"),!1):(this.$message.error("只支持.zip压缩文件"),!1)}),l()(o,"successCheck",function(e,t,i){console.log(e),this.$refs.upload.clearFiles(),this.popVisible=!1,200==e.code?1==e.data.isOpen?(this.exportErrList=e.data.list,this.exporterrPop=!0):0==e.data.isOpen?this.$alert("人员导入成功","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):2==e.data.isOpen&&this.$message.error("模板解析异常"):this.$message.error(e.msg)}),l()(o,"removeFile",function(){this.fileList=[]}),l()(o,"uploadErr",function(e,t,i){this.$message.error("导入失败")}),l()(o,"remove",function(e){this.images.splice(e,1)}),l()(o,"exceed",function(){this.$message.error("不支持多文件上传")}),l()(o,"goView",function(e,t){this.authPopVisible=!0,this.authId=e,this.authPopTitle=t}),o)},f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-wrapper"},[e._m(0),e._v(" "),i("section",{staticClass:"content container-fluid"},[i("div",{staticClass:"box box-primary"},[i("div",{staticClass:"box-body"},[i("div",{staticClass:"form-horizontal"},[i("div",{staticClass:"col-sm-4 pl-0"},[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.paySelect}},[i("span",{staticClass:"glyphicon glyphicon-book",attrs:{"aria-hidden":"true"}}),e._v(" 创建专线包资源池\n              ")])])]),e._v(" "),i("div",{staticClass:"col-sm-8 text-right p-0 flex-style"},[i("div",{staticClass:"col-lg-3 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入资源池名称"},model:{value:e.resourceList.name,callback:function(t){e.$set(e.resourceList,"name",t)},expression:"resourceList.name"}})],1)])]),e._v(" "),i("div",[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.getTableData}},[i("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),e._v("查询\n                ")]),e._v(" "),i("button",{staticClass:"btn btn-default mr-10",attrs:{id:"btn_device_reset",type:"button"},on:{click:e.resetBtn}},[i("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e._v("重置\n                ")]),e._v(" "),i("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-checkbox-group",{on:{change:e.checkboxChange},model:{value:e.tableSelect,callback:function(t){e.tableSelect=t},expression:"tableSelect"}},e._l(e.tableOption,function(e){return i("div",{key:e,staticClass:"checkbox-div"},[i("el-checkbox",{key:e,attrs:{label:e}})],1)}))],1)],1)],1)])])]),e._v(" "),i("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableChild",attrs:{"table-data":e.tableData,"table-label":e.tableLabel,"is-show-select":e.isShowSelect}},[i("el-table-column",{attrs:{slot:"editResourceName",label:"资源池名称",align:"center",width:"180"},slot:"editResourceName",scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{cursor:"pointer"},on:{click:function(i){e.editPoolName(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{slot:"editPackageNum",label:"专线包个数",align:"center",width:"180"},slot:"editPackageNum",scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{cursor:"pointer"},on:{click:e.editPackageSpecialized}},[e._v(e._s(t.row.packageNum))])]}}])}),e._v(" "),i("el-table-column",{attrs:{slot:"devicesNum",label:"设备数",align:"center",width:"180"},slot:"devicesNum",scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{class:1===t.row.deviceNumStatus?"green":2===t.row.deviceNumStatus?"yellow":"red",staticStyle:{width:"100%",cursor:"pointer"},on:{click:function(i){e.editDevice(t.row)}}},[e._v(e._s(t.row.deviceNumDesc))])]}}])}),e._v(" "),i("el-table-column",{attrs:{slot:"parallelNum",label:"并行个数",align:"center",width:"180"},slot:"parallelNum",scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{class:1===t.row.parallelNumStatus?"green":2===t.row.deviceNumStatus?"yellow":"red",staticStyle:{width:"100%",cursor:"pointer"},on:{click:function(i){e.editParallel(t.row)}}},[e._v(e._s(t.row.parallelNumDesc))])]}}])}),e._v(" "),i("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"180"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-row",[i("el-button",{attrs:{title:"添加专线包",type:"primary",icon:"el-icon-folder-add",round:"",size:"mini"},on:{click:function(i){e.addParallel(t.row.id)}}}),e._v(" "),i("el-button",{attrs:{title:"添加设备",type:"primary",icon:"el-icon-document-add",round:"",size:"mini"},on:{click:function(i){e.addDevice(t.row.id,t.row.limitDeviceNum)}}}),e._v(" "),i("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(i){e.deleteOwner(t.row.id)}}})],1)]}}])})],1),e._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),i("el-dialog",{attrs:{title:"批量导入",visible:e.importPop,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.importPop=t}}},[i("div",{staticStyle:{padding:"0px"}},[i("div",{staticClass:"row mb-20"},[i("div",{staticClass:"col-sm-3 text-right"},[e._v("点击下载Excel模板")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[i("a",{attrs:{href:e.imgurl+"/static/excel/person.xls"}},[e._v("开始下载Excel导入模板.xls")]),e._v(" "),i("span",{staticStyle:{color:"red"}},[e._v("（Excel导入模板表头红色必填）")])])]),e._v(" "),i("div",{staticClass:"row mb-20"},[i("div",{staticClass:"col-sm-3 text-right"},[e._v("选择.zip文件")]),e._v(" "),i("div",{staticClass:"col-sm-9 upload-zip"},[i("el-upload",{ref:"upload",attrs:{name:"file",limit:1,"with-credentials":!0,"file-list":e.fileList,action:e.exportUrl+e.appId,data:e.uploadData,"auto-upload":!1,"on-exceed":e.exceed,"on-change":e.selectChange,"on-error":e.uploadErr,"before-upload":e.beforeAvatarUpload,"on-success":e.successCheck,"on-remove":e.removeFile}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传")])],1)],1)]),e._v(" "),i("div",{staticClass:"row mb-20"},[i("div",{staticClass:"col-sm-3 text-right"},[e._v("导入须知")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[e._v("\n            1、上传文件大小最大为："),i("span",{staticStyle:{color:"red"}},[e._v("128MB")]),e._v("；"),i("br"),e._v("\n            2、excel文件跟人员图片需要放在"),i("span",{staticStyle:{color:"red"}},[e._v("同一层级目录")]),e._v("，如图片放在(批量导入目录)则excel文件也要放在该目录下；"),i("br"),e._v("\n            3、目前仅支持上传"),i("span",{staticStyle:{color:"red"}},[e._v("zip格式")]),e._v("压缩文件，将文件夹压缩时请选择正确的压缩格式；"),i("span",{staticStyle:{color:"red"}},[e._v("excel模板请下载上方指定的模板")]),e._v("；"),i("br"),e._v("\n            4、人员与图片的对应方式为根据excel文件人脸图片进行获取，如果当前导入用户 存在人脸图片，请将图片名称填入此列;"),i("br"),e._v("\n            5、当人脸图片列为空时，会根据人员姓名去进行一次对应的图片获取，如人员姓名为李四，会去获取一次图片名称为李四的文件；"),i("br"),e._v("\n            6、若无excel文件，仅有图片，则人脸图片名称格式为："),i("span",{staticStyle:{color:"red"}},[e._v("姓名_人员编号")])])])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.importPop=!1}}},[e._v("关闭")])],1)])],1),e._v(" "),e.showViewer?i("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":e.previewImg}}):e._e(),e._v(" "),i("el-dialog",{staticClass:"el-dialog-reset set-pop",attrs:{title:e.checkPopTitle,visible:e.checkPopVisible,width:"30%"},on:{"update:visible":function(t){e.checkPopVisible=t},close:e.closePop}},[i("div",{staticStyle:{padding:"0px"}},[1==e.popIndex?i("div",[i("h4",[i("span",{staticClass:"el-icon-warning icon-warning"}),e._v("是否同意申请")]),e._v(" "),i("p",{staticClass:"pl-30"},[e._v(e._s(e.checkMsg))])]):e._e(),e._v(" "),2==e.popIndex?i("div",[i("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":"",rows:"5",placeholder:"请输入拒绝原因"},model:{value:e.checkForm.bindFailReseaon,callback:function(t){e.$set(e.checkForm,"bindFailReseaon",t)},expression:"checkForm.bindFailReseaon"}}),e._v(" "),e.showCheckTip?i("span",{staticClass:"tip"},[e._v("请输入拒绝原因")]):e._e()],1):e._e()]),e._v(" "),1==e.popIndex?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.clickRefuse}},[e._v("拒绝")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.checkAgree}},[e._v("同意")])],1):e._e(),e._v(" "),2==e.popIndex?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelRefuse}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.refuse}},[e._v("确定")])],1):e._e()]),e._v(" "),i("export-box",{ref:"exportData",attrs:{exportPopVisible:e.outPop,isExport:e.isExport},on:{"update:exportPopVisible":function(t){e.outPop=t},"update:isExport":function(t){e.isExport=t}}}),e._v(" "),i("auth-box",{ref:"authData",attrs:{authPopVisible:e.authPopVisible,authPopTitle:e.authPopTitle},on:{"update:authPopVisible":function(t){e.authPopVisible=t}}}),e._v(" "),i("el-dialog",{staticClass:"el-dialog-reset",attrs:{title:"导入失败数据",visible:e.exporterrPop,width:"60%"},on:{"update:visible":function(t){e.exporterrPop=t}}},[i("div",{staticStyle:{padding:"0px"}},[i("el-table",{attrs:{data:e.exportErrList,"max-height":"250",border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[i("el-table-column",{attrs:{property:"personName",label:"姓名",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{property:"phone",label:"手机号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{property:"icNum",label:"IC卡",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{property:"personSubtype",label:"住户类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.personSubtype?i("span",[e._v("户主")]):e._e(),e._v(" "),"2"==t.row.personSubtype?i("span",[e._v("家庭成员")]):e._e(),e._v(" "),"3"==t.row.personSubtype?i("span",[e._v("租客")]):e._e(),e._v(" "),"5"==t.row.personSubtype?i("span",[e._v("其他")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"buildName",label:"楼栋",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{property:"unitName",label:"单元",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{property:"houseName",label:"房号",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{property:"errorMsg",label:"失败原因","min-width":"120"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.exporterrPop=!1}}},[e._v("取 消")])],1)]),e._v(" "),i("msg-box",{attrs:{popVisible:e.popVisible,popTitle:e.popTitle,popContent:e.popContent},on:{"update:popVisible":function(t){e.popVisible=t}}}),e._v(" "),i("el-dialog",{staticClass:"pool-dialog",attrs:{title:e.isCreate?"创建专线包资源池":"编辑专线包资源池",visible:e.dialogVisible,width:"20%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"poolForm",attrs:{model:e.poolForm,"label-width":"240px",rules:e.rules,"label-position":"top"}},[i("el-form-item",{attrs:{label:"资源池名称",prop:"resourcesName"}},[i("el-input",{attrs:{placeholder:"请输入资源池名称",maxlength:"68"},model:{value:e.poolForm.resourcesName,callback:function(t){e.$set(e.poolForm,"resourcesName",t)},expression:"poolForm.resourcesName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"每台相机最大播放客户端数量",prop:"limitParallelNumPerDevice"}},[i("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"请输入每台相机最大播放客户端数量"},model:{value:e.poolForm.limitParallelNumPerDevice,callback:function(t){e.$set(e.poolForm,"limitParallelNumPerDevice",t)},expression:"poolForm.limitParallelNumPerDevice"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?i("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.creatResources("poolForm")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"导入",visible:e.exportVisible,width:"30%"},on:{"update:visible":function(t){e.exportVisible=t}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("el-input",{attrs:{type:"textarea",placeholder:"请将激活码输入到该输入框"},model:{value:e.activationCode,callback:function(t){e.activationCode=t},expression:"activationCode"}})],1)]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.exportVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exportVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.isOperate?"选择专线包":"专线包个数",visible:e.dedicatedPoolDialogVisible,width:"80%"},on:{"update:visible":function(t){e.dedicatedPoolDialogVisible=t}}},[i("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"tableChild1",attrs:{"table-data":e.tableData1,"table-label":e.tableLabel1,"is-show-select":e.isShowSelect1}}),e._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total1},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dedicatedPoolDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isOperate,expression:"isOperate"}],attrs:{type:"primary"},on:{click:e.checkedDedicatedPool}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"选择设备",visible:e.deviceDialogVisible,width:"60%"},on:{"update:visible":function(t){e.deviceDialogVisible=t}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-9 pl-0"},[i("div",{staticClass:"col-sm-4 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-select",{attrs:{placeholder:"选择机构"},on:{change:e.deviceOrgChange},model:{value:e.deviceListForm.orgId,callback:function(t){e.$set(e.deviceListForm,"orgId",t)},expression:"deviceListForm.orgId"}},e._l(e.orgIdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),i("div",{staticClass:"col-sm-4 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12 pl-0"},[i("el-select",{attrs:{clearable:"",placeholder:"选择车场"},model:{value:e.deviceListForm.appId,callback:function(t){e.$set(e.deviceListForm,"appId",t)},expression:"deviceListForm.appId"}},e._l(e.appIdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),i("div",{staticClass:"col-sm-4 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12 pl-0"},[i("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择绑定的设备或序列号"},model:{value:e.deviceListForm.searchStr,callback:function(t){e.$set(e.deviceListForm,"searchStr",t)},expression:"deviceListForm.searchStr"}})],1)])])]),e._v(" "),i("div",{staticClass:"col-sm-3 text-right flex-style"},[i("div",{staticClass:"col-sm-12  p-0"},[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.getDeviceList}},[i("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),e._v("查询\n            ")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:e.resetBtn3}},[i("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e._v("重置\n            ")])])])])]),e._v(" "),i("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:e.loading4,expression:"loading4"}],ref:"tableChild5",attrs:{"table-data":e.tableData5,"table-label":e.tableLabel5,"is-show-select":e.isShowSelect5}}),e._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":e.currentPage5,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total5},on:{"size-change":e.handleSizeChange5,"current-change":e.handleCurrentChange5}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deviceDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?i("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):i("el-button",{attrs:{type:"primary"},on:{click:e.checkedDevide}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"播放情况",visible:e.VideoPayDialogVisible,width:"80%"},on:{"update:visible":function(t){e.VideoPayDialogVisible=t}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-3"},[i("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.isFlag,expression:"isFlag"}],attrs:{size:"medium"},on:{change:e.radioChangeS},model:{value:e.resourcePoolBindedDeviceForm.playIng,callback:function(t){e.$set(e.resourcePoolBindedDeviceForm,"playIng",t)},expression:"resourcePoolBindedDeviceForm.playIng"}},e._l(e.payStatusList,function(t,a){return i("el-radio-button",{key:a,attrs:{label:t.id}},[e._v(e._s(t.name)+"\n          ")])})),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isFlag,expression:"!isFlag"}],attrs:{type:"primary"}},[e._v("播放中")]),e._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:e.unbindDeviceAll}},[e._v("批量解绑")])],1),e._v(" "),i("div",{staticClass:"col-sm-9 text-right flex-style"},[i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-select",{attrs:{placeholder:"选择机构"},on:{change:e.videoOrgchang},model:{value:e.resourcePoolBindedDeviceForm.orgId,callback:function(t){e.$set(e.resourcePoolBindedDeviceForm,"orgId",t)},expression:"resourcePoolBindedDeviceForm.orgId"}},e._l(e.orgIdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-select",{attrs:{clearable:"",placeholder:"选择车场"},model:{value:e.resourcePoolBindedDeviceForm.appId,callback:function(t){e.$set(e.resourcePoolBindedDeviceForm,"appId",t)},expression:"resourcePoolBindedDeviceForm.appId"}},e._l(e.appIdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),i("div",{staticClass:"col-sm-3 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择绑定的设备或序列号"},model:{value:e.resourcePoolBindedDeviceForm.deviceSearch,callback:function(t){e.$set(e.resourcePoolBindedDeviceForm,"deviceSearch",t)},expression:"resourcePoolBindedDeviceForm.deviceSearch"}})],1)])]),e._v(" "),i("div",{staticClass:"col-sm-2  p-0 my-wth"},[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.getResourcePoolBindedDevices}},[i("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),e._v("查询\n            ")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:e.resetBtn2}},[i("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e._v("重置\n            ")])])])])]),e._v(" "),i("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"tableChild2",attrs:{"table-data":e.tableData2,"table-label":e.tableLabel2,"is-show-select":e.isShowSelect2}},[i("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"150"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-row",[i("el-button",{attrs:{title:"停止推流",type:"primary",icon:"el-icon-stopwatch",round:"",size:"mini"},on:{click:function(i){e.stopPush(t.row.deviceId)}}}),e._v(" "),i("el-button",{attrs:{title:"设备解绑",type:"primary",icon:"el-icon-document-remove",round:"",size:"mini"},on:{click:function(i){e.unbindDevice(t.row.deviceId)}}})],1)]}}])})],1),e._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.VideoPayDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isFlag,expression:"isFlag"}],attrs:{type:"primary"},on:{click:e.checkedDedicatedPool}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"自动添加设备",visible:e.transferInstitutionVisible,width:"53%"},on:{"update:visible":function(t){e.transferInstitutionVisible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[i("el-tab-pane",{attrs:{label:"机构",name:"first"}},[i("p",{staticStyle:{"font-weight":"bold"}},[e._v("自动将以下选中的机构设备加入资源池:")]),e._v(" "),i("el-transfer",{attrs:{data:e.orgIdToDevice,props:e.orgIdListDefaultProps,titles:["可选机构","已选机构"]},model:{value:e.selectOrgId,callback:function(t){e.selectOrgId=t},expression:"selectOrgId"}}),e._v(" "),i("br"),e._v(" "),i("el-checkbox",{model:{value:e.containChild,callback:function(t){e.containChild=t},expression:"containChild"}},[e._v("包含下级所有子机构")])],1),e._v(" "),i("el-tab-pane",{attrs:{label:"车场",name:"second"}},[i("p",{staticStyle:{"font-weight":"bold"}},[e._v("自动将以下选中的停车场设备加入资源池:")]),e._v(" "),i("el-tree",{ref:"tree",staticStyle:{"max-height":"333px","overflow-y":"scroll"},attrs:{data:e.appIdToDevice,"show-checkbox":"","default-expand-all":"","default-checked-keys":e.checkedAppIds,"node-key":"id","highlight-current":"",props:e.appIdDefaultProps},on:{"node-click":e.handleNodeClick}})],1)],1)],1)]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.transferInstitutionVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?i("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):i("el-button",{attrs:{type:"primary"},on:{click:e.setDataInfo}},[e._v("确 定")])],1)])],1)},x=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"content-header"},[i("h1",{staticClass:"nice"},[e._v("\n      资源池 - 专线包\n      ")]),e._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",{attrs:{href:"/"}},[i("i",{staticClass:"glyphicon glyphicon-home"}),e._v(" 首页\n        ")])]),e._v(" "),i("li",{staticClass:"active"},[i("i",{staticClass:"glyphicon glyphicon-adjust"}),e._v(" 专线包\n      ")])])])}],_={render:f,staticRenderFns:x},w=_,P=i("VU/8"),y=a,I=P(m,w,!1,y,"data-v-3a64dc15",null);t.default=I.exports}});