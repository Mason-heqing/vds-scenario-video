webpackJsonp([3],{"S+vd":function(e,t,a){"use strict";function i(e){a("znPJ")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("TtmE"),o=a("D7x1"),l=a("7lXo"),n=a("5Wmi"),r=a("pOg+"),c=a("18Ef"),d=a("lbHh"),p=a.n(d),u={name:"home",data:function(){return{msg:"视频资源-时长包",currentPage:1,currentPage1:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",payDialogVisible:!1,payImg:"",orderName:"",orderAmount:0,payNum:null,socketUrl:"",userId:null,total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"id",param:"id",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"orderId",param:"orderId",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"orgId",param:"orgId",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"goodsId",param:"goodsId",align:"left",sortable:!0,isshow:!1,width:"100"},{label:"播放量",param:"specificationDesc",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"播放时长",param:"durationDesc",align:"center",sortable:!0,isshow:!0,width:"80"},{label:"可用设备数",param:"limitDeviceNum",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"购买时间",param:"purchaseTimeFormat",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"绑定资源池",param:"bindTarget",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"激活时间",param:"activationTimeFormat",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"过期时间",param:"expireTimeFormat",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"剩余时间",param:"remainingSecondsFormat",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"来源",param:"sourceFormat",align:"center",isshow:!0,sortable:!0,width:"80"},{label:"是否转让",param:"transfered",align:"center",isshow:!0,sortable:!0,width:"80",render:function(e){return 1===e.transfered?"已转让":"未转让"}},{label:"绑定状态",param:"bindedFormat",align:"center",isshow:!0,sortable:!0,width:"100"},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],activeName:"first",isShowSelect:!0,specialPageForm:{currentPage:1,pageSize:10,orgId:p.a.get("orgId"),transferFlag:!1,category:2,source:"",duration:"",binded:"",deviceSearch:""},total1:1,tableData1:[],tableLabel1:[{label:"序号",param:"img",align:"center",sortable:!0,isshow:!0,index:!0},{label:"人脸",param:"faceUrl",align:"center",sortable:!0,isimg:!0,isshow:!0,width:"120"},{label:"姓名",param:"personName",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"联系方式",param:"phone",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"住户类型",param:"personSubtype",align:"center",isshow:!0,width:"120",render:function(e){return 1===e.personSubtype?"户主":2==e.personSubtype?"家庭成员":3==e.personSubtype?"租客":5==e.personSubtype?"其他":void 0}},{label:"住宅信息",param:"houseAddress",align:"center",isshow:!0,sortable:!0,width:"150"},{label:"有效期限",param:"effectiveTime",align:"center",isshow:!0,sortable:!0,width:"180"},{slot:"operate1",isshow:!0,label:"附件"},{label:"申请时间",param:"applyTime",align:"center",isshow:!0,sortable:!0,width:"180"},{label:"审核状态",param:"bindStatus",align:"center",isshow:!0,width:"120",render:function(e){return 0==e.bindStatus?"待物业审核":1==e.bindStatus?"户主审核通过":2==e.bindStatus?"户主审核未通过":3==e.bindStatus?"物业审核通过":4==e.bindStatus?"物业审核未通过":5==e.bindStatus?"待户主审核":8==e.bindStatus?"已取消":9==e.bindStatus?"已绑定":void 0}},{slot:"operate",isshow:!0}],tableOption1:[],tableSelect1:[],loading:!1,cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",checkStrictly:!0,expandTrigger:"hover"},importPop:!1,fileList:[],uploadData:{appId:""},isExport:!1,exportUrl:"",exportErrList:[],exporterrPop:!1,timer:null,elcascaderkey:1,transferType:"我的",sourceType:[{name:"全部",id:null},{name:"随设备赠送",id:0},{name:"购买",id:1},{name:"转让",id:2}],statusList:[{name:"全部",id:null},{name:"已绑定",id:1},{name:"未绑定",id:2}],dialogVisible:!1,activeNamePaytype:"first",specialGoodsMap:[],specialSubset:[],specialSubsetItem:[],deviceNum:0,paySpecialNum:1,specialPackageprice:0,specialPackageTotal:0,play_package:"",payTimes:"",isBtn:!1,exportVisible:!1,activationCode:"",transferInstitutionVisible:!1,mechanismDialogVisible:!1,selectMechanism:"",orderDefaultProps:{children:"children",label:"orgName"},filterText:"",mechanismList:[],deviceDialogVisible:!1,selectDevice:"",deviceList:[],props:{label:"name",children:"zones"},count:1}},filters:{},created:function(){this.isMaster="false"!=p.a.get("isMaster");for(var e=0;e<this.tableLabel.length;e++)this.tableLabel[e].label&&this.tableOption.push(this.tableLabel[e].label),this.tableLabel[e].isshow&&this.tableSelect.push(this.tableLabel[e].label);this.imgurl=this.tools.global.API_URL},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(e){this.$store.commit("changeProjectId",e)}}},watch:{filterText:function(e){this.$refs.orgIdTree.filter(e),this.selectMechanism="",this.$refs.orgIdTree.setCurrentKey()}},components:{MsgBox:s.a,TableCmp:o.a,TableBmp:l.a,ElImageViewer:n.a,ExportBox:r.a,AuthBox:c.a},mounted:function(){this.getgoods(),this.getTableData(),this.getWebsocketUrl(),this.getmechanism()},destroyed:function(){this.payImg&&""!=this.payImg&&this.socketApi.websocketclose()},methods:{websocketToLogin:function(){var e={type:"WS_SUBSCRIBE",userId:this.userId};this.socketApi.sendSock(e,this.getConfigResult)},getConfigResult:function(e){console.log("接收回调函数返回数据的方法",e),"WS_SUBSCRIBE"==e.type||"WS_PAY_COMP"==e.type&&(this.payDialogVisible=!1,this.utils.tip("success","支付成功!"),this.socketApi.websocketclose(),this.getTableData())},getWebsocketUrl:function(){var e=this;this.utils.http({url:"/wx/native/getNativeSocketUrl",method:"post"},function(t){200==t.code&&(e.socketUrl=t.data,p.a.set("payWebsocketUrl",t.data.webSocketUtl),e.userId=t.data.userId),console.log("获取socket地址",t)})},radioChangeS:function(e){this.specialPageForm.transferFlag=e,this.getTableData()},paySelect:function(){this.dialogVisible=!0},radioChangeP:function(e){var t=this.specialGoodsMap.indexOf(e);this.specialSubsetItem=this.specialSubset[t],this.payTimes=this.specialSubsetItem[0].id,this.deviceNum=this.specialSubsetItem[0].limitDeviceNum,this.specialPackageprice=this.specialSubsetItem[0].price,this.specialPackageTotal=parseInt(this.specialPackageprice)*parseInt(this.paySpecialNum)},radioChangePayTimes:function(e){var t=this;this.specialSubsetItem.map(function(a){a.id==e&&(t.specialPackageprice=a.price,t.deviceNum=a.limitDeviceNum)}),this.specialPackageTotal=parseInt(this.specialPackageprice)*parseInt(this.paySpecialNum)},payChangeNum:function(e){""==e&&(this.paySpecialNum=1),this.specialPackageTotal=parseInt(this.specialPackageprice)*parseInt(this.paySpecialNum)},playChangedeviceNum:function(e){""==e&&(this.deviceNum=1)},orderHandleCheckChange:function(e,t,a){console.log(e,"----",t),t&&(this.selectMechanism=e.orgId,this.$refs.orgIdTree.setCheckedKeys([e.orgId]))},filterNode:function(e,t){return!e||-1!==t.orgName.indexOf(e)},selectCurerentOrgId:function(e,t,a){this.selectMechanism=e.orgId},onSubmit:function(){var e=this,t={goodsId:"",orderId:"",isWebmaster:this.isMaster,orgId:p.a.get("orgId"),quantity:0};if(0==this.paySpecialNum)return void this.$message.error("购买数量不能为0,请重新输入购买数量!");this.isMaster&&(t.limitDeviceNum=parseInt(this.deviceNum)),t.goodsId=this.payTimes,t.quantity=this.paySpecialNum,this.isBtn=!0,this.utils.http({url:"/order/create",method:"post",data:t},function(t){e.isBtn=!1,200==t.code&&(e.dialogVisible=!1,e.isMaster?e.utils.tip("success","订单支付成功!"):(e.payImg=t.data.codeUrlStr,e.orderName=t.data.goodsDesc,e.orderAmount=t.data.totalPrice,e.payNum=t.data.quantity,e.payDialogVisible=!0,e.socketApi.initWebSocket(),e.websocketToLogin()),e.getTableData())})},getgoods:function(){var e=this;this.utils.http({url:"/goods/tab",method:"post"},function(t){if(200==t.code&&t.data.specialGoodsMap){e.specialGoodsMap=[],e.specialSubset=[];for(var a in t.data.specialGoodsMap)e.specialGoodsMap.push(a),e.specialSubset.push(t.data.specialGoodsMap[a]);e.play_package=e.specialGoodsMap[0],e.specialSubsetItem=e.specialSubset[0],e.payTimes=e.specialSubset[0][0].id,e.deviceNum=e.specialSubset[0][0].limitDeviceNum,e.specialPackageprice=e.specialSubset[0][0].price,e.specialPackageTotal=parseInt(e.deviceNum)*parseInt(e.specialPackageprice)}})},gooperation:function(e,t){if(1===t){if(this.mechanismList&&0===this.mechanismList.length)return void this.$message({message:"当前没有机构,请先创建机构!",type:"warning"});this.mechanismDialogVisible=!0,this.toolForm={category:2,operateObjectId:e.bindTarget,operateType:2,packageIdList:[e.id],orgId:p.a.get("orgId")},this.toolType=t}else{if(this.deviceList&&0===this.deviceList.length)return void this.$message({message:"当前没有资源池,请先创建资源池!",type:"warning"});this.deviceDialogVisible=!0,this.getDevice(),this.toolForm={category:2,operateObjectId:e.bindTarget,operateType:1,packageIdList:[e.id],orgId:p.a.get("orgId")}}},getmechanism:function(){var e=this;this.utils.http({url:"/org/search/child?orgId="+p.a.get("orgId"),method:"POST"},function(t){200==t.code&&(e.mechanismList=t.data)})},getDevice:function(){var e=this;this.utils.http({url:"/pool/specialized/search/select?orgId="+p.a.get("orgId"),method:"POST"},function(t){200==t.code&&(e.deviceList=t.data.deviceList)})},checkedMechanism:function(){""==this.selectMechanism?this.$message.error("请选择机构!"):(this.toolForm.operateObjectId=this.selectMechanism,this.dataSend(this.toolForm,this.toolType))},checkedDevide:function(){""==this.selectDevice?this.$message.error("请选择设备!"):(this.toolForm.operateObjectId=this.selectDevice,this.dataSend(this.toolForm,this.toolType))},dataSend:function(e,t){var a=this;this.isBtn=!0,this.utils.http({url:"/videoPackage/operate",method:"POST",data:e},function(e){a.isBtn=!1,1===t?a.mechanismDialogVisible=!1:a.deviceDialogVisible=!1,200==e.code&&(a.utils.tip("success",1===t?"转让成功":"绑定成功"),a.getTableData())})},exportModel:function(){this.exportVisible=!0},handleCheckChange:function(e,t,a){console.log(e,t,a)},handleNodeClick:function(e){console.log(e)},loadNode:function(e,t){var a=this;if(0===e.level)return t([{name:"region1"},{name:"region2"}]);if(e.level>3)return t([]);var i;i="region1"===e.data.name||"region2"!==e.data.name&&Math.random()>.5,setTimeout(function(){var e;e=i?[{name:"zone"+a.count++},{name:"zone"+a.count++}]:[],t(e)},500)},elCascaderOnlick:function(){var e=this;setTimeout(function(){document.querySelectorAll(".el-cascader-node__label").forEach(function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.elcascader.dropDownVisible=!1}}),document.querySelectorAll(".el-cascader-panel .el-radio").forEach(function(t){t.onclick=function(){e.$refs.elcascader.dropDownVisible=!1}})},100)},assignmentBtn:function(){var e=this.$refs.tableChild.selectData;if(0>=e.length)return void this.$message.error("请先选择时长包 !");if(0>=this.mechanismList.length)return void this.$message.error("当前没有机构,请先创建机构!");var t=[];e.forEach(function(e,a){t.push(e.id)}),this.mechanismDialogVisible=!0,this.getmechanism(),this.toolForm={category:1,operateObjectId:"",operateType:2,packageIdList:t,orgId:p.a.get("orgId")},this.toolType=1},checkboxChange:function(e){for(var t=0;t<this.tableLabel.length;t++)this.tableSelect.indexOf(this.tableLabel[t].label)>-1?this.tableLabel[t].isshow=!0:this.tableLabel[t].isshow=!1},checkboxChange1:function(e){for(var t=0;t<this.tableLabel1.length;t++)this.tableSelect1.indexOf(this.tableLabel1[t].label)>-1?this.tableLabel1[t].isshow=!0:this.tableLabel1[t].isshow=!1},sourceChange:function(){this.getTableData()},bindChange:function(){this.getTableData()},objfilter:function(e){var t={};for(var a in e)""!==e[a]&&null!==e[a]&&(t[a]=e[a]);return t},getTableData:function(){var e=this;this.loading=!0;var t=this.objfilter(this.specialPageForm);this.utils.http({url:"/videoPackage/search",method:"POST",data:t},function(t){e.loading=!1,200==t.code&&(e.total=t.data.total,e.tableData=t.data.records,e.currentPage=t.data.current)})},noBind:function(e){var t=this;console.log(e),this.$confirm("确信解绑该专线包吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.utils.http({url:"/videoPackage/un/bind?packageId="+e.id,method:"POST"},function(e){200==e.code&&(t.utils.tip("success","解绑成功!"),t.getTableData())})}).catch(function(){})},resetBtn:function(){this.specialPageForm={currentPage:1,pageSize:10,orgId:p.a.get("orgId"),transferFlag:!1,category:2,source:"",duration:"",binded:"",deviceSearch:""},this.getTableData()},exportBtn:function(){this.outPop=!0},outBtn:function(){var e=this;if(this.isExport=!0,0==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm.withPic=1:this.PersonListForm.withPic=0;var t=[];this.$refs.tableChild.selectData.forEach(function(e,a){t.push(e.id)}),this.PersonListForm.ids=t,this.utils.http({url:"/person/personExport",method:"POST",data:this.PersonListForm},function(t){e.isExport=!1,e.outPop=!1,delete e.PersonListForm.ids,200==t.code?e.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):e.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}else if(1==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm1.withPic=1:this.PersonListForm1.withPic=0;var a=[],i=this.$refs.tableChild1.selectData;i.forEach(function(e,t){a.push(e.id)}),this.PersonListForm1.ids=a,this.utils.http({url:"/person/houseExport",method:"POST",data:this.PersonListForm1},function(t){e.isExport=!1,e.outPop=!1,delete e.PersonListForm1.ids,200==t.code?e.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):e.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}},onPreview:function(e){var t=this;this.previewImg=[],e.split(",").forEach(function(e,a){var i=t.imgurl+"/file/download?path="+e;t.previewImg.push(i)}),this.showViewer=!0},closeViewer:function(){this.showViewer=!1},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection)},handleSizeChange:function(e){this.specialPageForm.pageSize=e,this.getTableData()},handleCurrentChange:function(e){this.specialPageForm.currentPage=e,this.getTableData()},handleSizeChange1:function(e){this.PersonListForm1.pageSize=e,this.getCheckList()},handleCurrentChange1:function(e){this.PersonListForm1.currentPage=e,this.getCheckList()},handleClick:function(e,t){0==e.index?this.tabIndex=0:1==e.index&&(this.tabIndex=1)},submitUpload:function(){this.fileList.length>0?this.$refs.upload.submit():this.$message.error("请选择文件")},selectChange:function(e,t){if(!["zip"].includes(e.name.substring(e.name.lastIndexOf(".")+1)))return this.$message.error("只支持.zip压缩文件"),this.fileList=[],!1;this.fileList=t},beforeAvatarUpload:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1),i=["zip"],s=i.includes(a),o=e.size/1024/1024<128;return s?o?(this.importPop=!1,this.popVisible=!0,this.popTitle="提示",void(this.popContent="人员正在导入请稍后")):(this.$message.error("文件大小不能超过 128MB!"),!1):(this.$message.error("只支持.zip压缩文件"),!1)},successCheck:function(e,t,a){console.log(e),this.$refs.upload.clearFiles(),this.popVisible=!1,200==e.code?1==e.data.isOpen?(this.exportErrList=e.data.list,this.exporterrPop=!0):0==e.data.isOpen?this.$alert("人员导入成功","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):2==e.data.isOpen&&this.$message.error("模板解析异常"):this.$message.error(e.msg)},removeFile:function(){this.fileList=[]},uploadErr:function(e,t,a){this.$message.error("导入失败")},remove:function(e){this.images.splice(e,1)},exceed:function(){this.$message.error("不支持多文件上传")}}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrapper"},[e._m(0),e._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-body"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-sm-2 pl-0"},[a("div",{staticClass:"btn-group"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.isMaster,expression:"isMaster"}],staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.paySelect}},[e._v("\n                  创建订单\n                ")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.specialPageForm.transferFlag,expression:"!specialPageForm.transferFlag"}],staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:e.assignmentBtn}},[a("span",{staticClass:"glyphicon glyphicon-share",attrs:{"aria-hidden":"true"}}),e._v(" 转让\n                ")])])]),e._v(" "),a("div",{staticClass:"col-sm-10 text-right p-0 flex-style"},[a("div",{staticClass:"col-sm-2 pl-0"},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.radioChangeS},model:{value:e.specialPageForm.transferFlag,callback:function(t){e.$set(e.specialPageForm,"transferFlag",t)},expression:"specialPageForm.transferFlag"}},[a("el-radio-button",{attrs:{label:!1}},[e._v("我的")]),e._v(" "),a("el-radio-button",{attrs:{label:!0}},[e._v("已转让")])],1)],1),e._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"来源"},on:{change:e.sourceChange},model:{value:e.specialPageForm.source,callback:function(t){e.$set(e.specialPageForm,"source",t)},expression:"specialPageForm.source"}},e._l(e.sourceType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"绑定状态"},on:{change:e.bindChange},model:{value:e.specialPageForm.binded,callback:function(t){e.$set(e.specialPageForm,"binded",t)},expression:"specialPageForm.binded"}},e._l(e.statusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"col-lg-2 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入时长"},model:{value:e.specialPageForm.duration,callback:function(t){e.$set(e.specialPageForm,"duration",t)},expression:"specialPageForm.duration"}})],1)])]),e._v(" "),a("div",[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:e.getTableData}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),e._v("查询\n                  ")]),e._v(" "),a("button",{staticClass:"btn btn-default mr-10",attrs:{id:"btn_device_reset",type:"button"},on:{click:e.resetBtn}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e._v("重置\n                  ")]),e._v(" "),a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:e.checkboxChange},model:{value:e.tableSelect,callback:function(t){e.tableSelect=t},expression:"tableSelect"}},e._l(e.tableOption,function(e){return a("div",{key:e,staticClass:"checkbox-div"},[a("el-checkbox",{key:e,attrs:{label:e}})],1)}))],1)],1)],1)])])]),e._v(" "),a("table-cmp",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableChild",attrs:{"table-data":e.tableData,"table-label":e.tableLabel,"is-show-select":e.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"180"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.transfered&&1===t.row.binded,expression:"1 == scope.row.transfered && 1 === scope.row.binded"}],staticStyle:{background:"transparent",border:"none",cursor:"default"},attrs:{title:"",type:"",icon:"el-icon-s-check",round:"",size:"mini"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.transfered&&0===t.row.binded,expression:"1 == scope.row.transfered && 0 === scope.row.binded"}],staticStyle:{background:"transparent",border:"none",cursor:"default"},attrs:{title:"",type:"",icon:"el-icon-s-check",round:"",size:"mini"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.transfered,expression:"0 === scope.row.transfered"}],attrs:{title:"转让",type:"primary",icon:"el-icon-share",round:"",size:"mini"},on:{click:function(a){e.gooperation(t.row,1)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.binded,expression:"0 === scope.row.binded"}],attrs:{title:"绑定",type:"primary",icon:"el-icon-s-check",round:"",size:"mini"},on:{click:function(a){e.gooperation(t.row,2)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1===t.row.binded,expression:"1 === scope.row.binded"}],attrs:{title:"解绑",type:"primary",icon:"el-icon-s-open",round:"",size:"mini"},on:{click:function(a){e.noBind(t.row)}}})],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"批量导入",visible:e.importPop,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.importPop=t}}},[a("div",{staticStyle:{padding:"0px"}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[e._v("点击下载Excel模板")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("a",{attrs:{href:e.imgurl+"/static/excel/person.xls"}},[e._v("开始下载Excel导入模板.xls")]),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("（Excel导入模板表头红色必填）")])])]),e._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[e._v("选择.zip文件")]),e._v(" "),a("div",{staticClass:"col-sm-9 upload-zip"},[a("el-upload",{ref:"upload",attrs:{name:"file",limit:1,"with-credentials":!0,"file-list":e.fileList,action:e.exportUrl+e.appId,data:e.uploadData,"auto-upload":!1,"on-exceed":e.exceed,"on-change":e.selectChange,"on-error":e.uploadErr,"before-upload":e.beforeAvatarUpload,"on-success":e.successCheck,"on-remove":e.removeFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[e._v("导入须知")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[e._v("\n              1、上传文件大小最大为："),a("span",{staticStyle:{color:"red"}},[e._v("128MB")]),e._v("；"),a("br"),e._v("\n              2、excel文件跟人员图片需要放在"),a("span",{staticStyle:{color:"red"}},[e._v("同一层级目录")]),e._v("，如图片放在(批量导入目录)则excel文件也要放在该目录下；"),a("br"),e._v("\n              3、目前仅支持上传"),a("span",{staticStyle:{color:"red"}},[e._v("zip格式")]),e._v("压缩文件，将文件夹压缩时请选择正确的压缩格式；"),a("span",{staticStyle:{color:"red"}},[e._v("excel模板请下载上方指定的模板")]),e._v("；"),a("br"),e._v("\n              4、人员与图片的对应方式为根据excel文件人脸图片进行获取，如果当前导入用户 存在人脸图片，请将图片名称填入此列;"),a("br"),e._v("\n              5、当人脸图片列为空时，会根据人员姓名去进行一次对应的图片获取，如人员姓名为李四，会去获取一次图片名称为李四的文件；"),a("br"),e._v("\n              6、若无excel文件，仅有图片，则人脸图片名称格式为："),a("span",{staticStyle:{color:"red"}},[e._v("姓名_人员编号")])])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importPop=!1}}},[e._v("关闭")])],1)])],1),e._v(" "),a("el-dialog",{staticClass:"el-dialog-reset",attrs:{title:"导入失败数据",visible:e.exporterrPop,width:"60%"},on:{"update:visible":function(t){e.exporterrPop=t}}},[a("div",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:e.exportErrList,"max-height":"250",border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[a("el-table-column",{attrs:{property:"personName",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{property:"phone",label:"手机号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"icNum",label:"IC卡",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"personSubtype",label:"住户类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.personSubtype?a("span",[e._v("户主")]):e._e(),e._v(" "),"2"==t.row.personSubtype?a("span",[e._v("家庭成员")]):e._e(),e._v(" "),"3"==t.row.personSubtype?a("span",[e._v("租客")]):e._e(),e._v(" "),"5"==t.row.personSubtype?a("span",[e._v("其他")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"buildName",label:"楼栋",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"unitName",label:"单元",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"houseName",label:"房号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"errorMsg",label:"失败原因","min-width":"120"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.exporterrPop=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("msg-box",{attrs:{popVisible:e.popVisible,popTitle:e.popTitle,popContent:e.popContent},on:{"update:popVisible":function(t){e.popVisible=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"创建订单",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeNamePaytype,callback:function(t){e.activeNamePaytype=t},expression:"activeNamePaytype"}},[a("el-tab-pane",{attrs:{label:"专线包",name:"first"}},[a("el-row",{attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[e._v("同时播放")]),e._v(" "),a("el-col",{attrs:{span:19}},[a("el-radio-group",{on:{change:e.radioChangeP},model:{value:e.play_package,callback:function(t){e.play_package=t},expression:"play_package"}},e._l(e.specialGoodsMap,function(e,t){return a("el-radio-button",{key:t,attrs:{label:e}})}))],1)],1),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[e._v("购买时长")]),e._v(" "),a("el-col",{attrs:{span:19}},[a("el-radio-group",{on:{change:e.radioChangePayTimes},model:{value:e.payTimes,callback:function(t){e.payTimes=t},expression:"payTimes"}},e._l(e.specialSubsetItem,function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.id}},[e._v("\n                  "+e._s(t.durationDesc)+"\n                ")])}))],1)],1),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[e._v("购买数量")]),e._v(" "),a("el-col",{attrs:{span:19}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入购买数量",onkeyup:"value=value.replace(/[^\\d]/g,'')"},on:{change:e.payChangeNum},model:{value:e.paySpecialNum,callback:function(t){e.paySpecialNum=t},expression:"paySpecialNum"}}),e._v(" 个\n            ")],1)],1),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[e._v("可用设备数")]),e._v(" "),e.isMaster?a("el-col",{attrs:{span:19}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入限制数量",onkeyup:"value=value.replace(/[^\\d]/g,'')"},on:{change:e.playChangedeviceNum},model:{value:e.deviceNum,callback:function(t){e.deviceNum=t},expression:"deviceNum"}}),e._v(" 个\n            ")],1):a("el-col",{attrs:{span:19}},[a("span",[e._v(e._s(e.deviceNum)+"个")])])],1),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"text-right pr-20",attrs:{span:5}},[e._v("总价")]),e._v(" "),a("el-col",{attrs:{span:19}},[a("span",[e._v(e._s(e.specialPackageTotal)+"元")])])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择机构",visible:e.mechanismDialogVisible,width:"20%"},on:{"update:visible":function(t){e.mechanismDialogVisible=t}}},[a("el-input",{staticClass:"mb-10",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("div",{staticClass:"device-list"},[a("el-tree",{ref:"orgIdTree",attrs:{props:e.orderDefaultProps,data:e.mechanismList,"check-strictly":!0,"filter-node-method":e.filterNode,"node-key":"orgId","default-expand-all":"","highlight-current":""},on:{"node-click":e.selectCurerentOrgId,"check-change":e.orderHandleCheckChange}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.mechanismDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:e.checkedMechanism}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择资源池",visible:e.deviceDialogVisible,width:"20%"},on:{"update:visible":function(t){e.deviceDialogVisible=t}}},[a("div",{staticClass:"device-list"},[a("el-radio-group",{model:{value:e.selectDevice,callback:function(t){e.selectDevice=t},expression:"selectDevice"}},e._l(e.deviceList,function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.serial}},[e._v(e._s(t.name)+"\n          ")])}))],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deviceDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isBtn?a("el-button",{attrs:{type:"primary",loading:!0}},[e._v("提交中")]):a("el-button",{attrs:{type:"primary"},on:{click:e.checkedDevide}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"导入",visible:e.exportVisible,width:"30%"},on:{"update:visible":function(t){e.exportVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("el-input",{attrs:{type:"textarea",placeholder:"请将激活码输入到该输入框"},model:{value:e.activationCode,callback:function(t){e.activationCode=t},expression:"activationCode"}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.exportVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.exportVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"转让给以下机构",visible:e.transferInstitutionVisible,width:"30%"},on:{"update:visible":function(t){e.transferInstitutionVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("el-tree",{attrs:{props:e.props,load:e.loadNode,lazy:"","show-checkbox":""},on:{"check-change":e.handleCheckChange}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.transferInstitutionVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.transferInstitutionVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"pay-orcode",attrs:{title:"请使用微信支付",visible:e.payDialogVisible,width:"15%"},on:{"update:visible":function(t){e.payDialogVisible=t}}},[a("div",{staticClass:"row"},[a("el-image",{staticStyle:{width:"100%",height:"220px"},attrs:{src:e.payImg}}),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[e._v("订单号 :")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",[e._v(e._s(e.orderName))])])],1),e._v(" "),a("el-row",{staticClass:"mt-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[e._v("购买数量 :")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",[e._v(e._s(e.payNum))])])],1),e._v(" "),a("el-row",{staticClass:"mt-10 mb-10",attrs:{align:"middle"}},[a("el-col",{staticClass:"pl-30",attrs:{span:12}},[e._v("支付金额 :")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",[e._v(e._s(e.orderAmount)+" 元")])])],1)],1)])],1)},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[e._v("\n        视频资源 - 专线包\n        ")]),e._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),e._v(" 首页\n          ")])]),e._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),e._v(" 专线包\n        ")])])])}],g={render:h,staticRenderFns:b},m=g,v=a("VU/8"),f=i,x=v(u,m,!1,f,"data-v-344740f9",null);t.default=x.exports},"fYX/":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,'\n.el-card[data-v-344740f9]{width:98.2%;margin:15px auto 0 auto;border-top:3px solid #3c8dbc\n}\n.wrapper-content[data-v-344740f9]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.content_video[data-v-344740f9]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:25px;width:65%\n}\n.video-box[data-v-344740f9]{position:relative;width:100%\n}\n.video-box1[data-v-344740f9]{width:calc(calc(100% / 2) - 10px);margin:2px 2px\n}\n.video-box2[data-v-344740f9]{width:calc(calc(100% / 3) - 10px);margin:2px 2px\n}\n.warpper-topBox[data-v-344740f9]{width:225px;margin:0  auto 25px auto\n}\n.content_left[data-v-344740f9]{width:20%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.content_left span[data-v-344740f9]{font-size:16px;margin-top:25px\n}\n.content_left[data-v-344740f9] .el-input{width:100%\n}\n.el_tabs[data-v-344740f9]{margin-top:25px;width:100%\n}\n.el_tabs [class^="el-icon-"][data-v-344740f9],.el_tabs [class*=" el-icon-"][data-v-344740f9]{margin:0 5px;color:#3c8dbc\n}\n.el_tabs .btn-group-box[data-v-344740f9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.el_tabs .btn-group-box>div[data-v-344740f9]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.el_tabs .all-group[data-v-344740f9]{height:42px;line-height:42px;padding-left:20px;border:1px solid #ddd;border-bottom:0\n}\n@media (max-width: 1200px){\n.el_tabs .btn-group-box[data-v-344740f9]{margin-top:15px\n}\n}\n.el_tabs .el-tab-pane[data-v-344740f9]{padding-bottom:10px\n}\n.el_tabs .set-pop[data-v-344740f9] .el-dialog__body{padding:0 20px\n}\n.el_tabs .set-pop[data-v-344740f9] .icon-warning{color:#E6A23C;font-size:24px !important\n}\n.el_tabs .set-pop[data-v-344740f9] .tip{color:red;display:block;margin:5px 0\n}\n.el_tabs .check-btn[data-v-344740f9]{cursor:pointer\n}\n.el_tabs .upload-zip[data-v-344740f9] .el-upload-list__item{width:60%\n}\n.el_tabs .upload-zip[data-v-344740f9] .el-upload-list__item a{font-size:16px\n}\n.el_tabs .grant-box[data-v-344740f9]{text-align:left;cursor:pointer\n}\n.el_tabs .grant-box>div[data-v-344740f9]{height:6px;background:#00a65a;border-radius:3px\n}\n.el_tabs .grant-box>div.grant-color-s[data-v-344740f9]{width:100%;background:#00a65a\n}\n.el_tabs .grant-box>div.grant-color-f[data-v-344740f9]{width:0;background:#dd4b39\n}\n.el_tabs .grant-box>div.grant-color-half[data-v-344740f9]{width:50%;background:#e6a23c\n}\n.el_tabs .grant-box>span[data-v-344740f9]{padding:0px 6px;height:18px;display:inline-block;border-radius:10px;text-align:center;color:#fff;line-height:18px;font-size:12px\n}\n.el_tabs .grant-box>span.grant-num-s[data-v-344740f9]{background:#00a65a\n}\n.el_tabs .grant-box>span.grant-num-f[data-v-344740f9]{background:#dd4b39\n}\n.el_tabs .grant-box>span.grant-num-half[data-v-344740f9]{background:#e6a23c\n}\n.active_A[data-v-344740f9]{color:blue\n}\n.video-close[data-v-344740f9]{position:absolute;right:5%;top:6%;cursor:pointer;color:#ffffff\n}\n.Camera_box[data-v-344740f9]{position:relative;margin:0 20px;width:165px;height:170px\n}\n.Camera_box .img_box img[data-v-344740f9]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);cursor:pointer\n}\n.Camera_box .img_box1[data-v-344740f9]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box2[data-v-344740f9]{position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box3[data-v-344740f9]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.Camera_box .img_box4[data-v-344740f9]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:32px;height:32px;cursor:pointer\n}\n.my-wth[data-v-344740f9]{width:13%\n}\n.el-row[data-v-344740f9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.flex-style[data-v-344740f9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end\n}\n.device-list[data-v-344740f9]{max-height:407px;overflow-y:scroll\n}\n.device-list .el-radio-group[data-v-344740f9]{width:100%\n}\n.device-list .el-radio-button[data-v-344740f9]{display:block;width:100%\n}\n.device-list .el-radio-button[data-v-344740f9] .el-radio-button__inner{width:100%;border-left:1px solid #DCDFE6\n}\n.device-list[data-v-344740f9] .el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content{background-color:#3c8dbc;color:#fff\n}\n.device-list[data-v-344740f9] .el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content{background-color:#3c8dbc;color:#fff\n}\n',""])},znPJ:function(e,t,a){var i=a("fYX/");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("2cb115e4",i,!0)}});